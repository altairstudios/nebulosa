---
permalink: /docs/api/incoming/class/
---
<!DOCTYPE html><html lang="en"><head><script>var _sf_startpt=(new Date()).getTime()</script><meta charset="utf-8"><meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width"><title>NebulaJS &middot; Class Reference</title><meta name="keywords" content="node.js,nodejs,cms,publishing,platform,web,development,framework,express,mongo,mongodb,bootstrap,react,jquery"><meta name="description" content="Get a head-start on the features you need. NebulaJS is the easiest way to build dynamic websites, applications and APIs with Node.js and MongoDB."><meta property="og:locale" content="en-us"><meta property="og:title" content="NebulaJS"><meta property="og:description" content="NebulaJS is an open source Node.js CMS and web application platform built on Express and MongoDB."><meta property="og:url" content="http://altairstudios.github.io/nebula/^current_url^"><meta property="og:site_name" content="NebulaJS"><meta property="og:type" content="article"><link href="http://fonts.googleapis.com/css?family=Roboto:100,300,300italic,400,500,700" rel="stylesheet"><link href="{{ site.github.url }}/styles/site.min.css" rel="stylesheet"><link href="{{ site.github.url }}/styles/prism.css" rel="stylesheet"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"></head><body><div class="language-switcher"><div class="container"><a href="/docs" class="active language-switcher-option">English</a></div></div><header role="banner" class="docs-header"><div class="container"><button type="button" data-toggle="collapse" data-target=".docs-nav__collapse" class="navbar-toggle navbar-toggle-menu"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" title="NebulaJS" class="header-title keystone-logo">NebulosaJS</a><nav class="docs-nav"><div class="docs-nav__collapse collapse"><ul class="docs-nav__nav"><li><a href="/">Home</a></li><li><a href="/getting-started">Getting Started</a></li><li class="active"><a href="/docs">Documentation</a></li><li><a href="/examples">Examples</a></li></ul></div></nav></div></header><div class="page-header"><div class="container"><h1>Class Reference </h1><p class="lead">incoming (master)</p></div></div><div class="docs-body"><div class="container"><div class="row"><div class="col-sm-3"><div class="visible-xs"><ul class="nav-toggle"><li><a href="/docs" class="nav-heading">Docs</a></li><li><a href="/docs/api/current/class" class="nav-heading">Current</a></li><li class="active"><a href="/docs/api/incoming/class" class="nav-heading">Incoming</a></li><li><a href="/docs/api/0.2.x/class" class="nav-heading">0.2.x	</a></li><li><a href="/docs/api/current/endpoint" class="nav-heading">Api</a></li></ul></div><div class="visible-xs lowMenu"><div class="col-xs-2"><span class="glyphicon glyphicon-menu-hamburger icon"></span></div><div class="col-xs-10"><ul class="sidebar-nav"><li class="nav-label"><a href="#changelog">0.3.x to 0.4.x Changes</a></li><li class="nav-label"><a href="#main-keystone">keystone</a></li><li><a href="#keystone-adminApp">.adminApp</a></li><li><a href="#keystone-createItems">.createItems</a></li><li><a href="#keystone-expandPath">.expandPath</a></li><li><a href="#keystone-get">.get</a></li><li><a href="#keystone-getOrphanedLists">.getOrphanedLists</a></li><li><a href="#keystone-getPath">.getPath</a></li><li><a href="#keystone-importer">.importer</a></li><li><a href="#keystone-init">.init</a></li><li><a href="#keystone-initDatabase">.initDatabase</a></li><li><a href="#keystone-initExpressApp">.initExpressApp</a></li><li><a href="#keystone-initExpressSession">.initExpressSession</a></li><li><a href="#keystone-initNav">.initNav</a></li><li><a href="#keystone-list">.list</a></li><li><a href="#keystone-mount">.mount</a></li><li><a href="#keystone-openDatabaseConnection">.openDatabaseConnection</a></li><li><a href="#keystone-options">.options</a></li><li><a href="#keystone-populateRelated">.populateRelated</a></li><li><a href="#keystone-prefixModel">.prefixModel</a></li><li><a href="#keystone-redirect">.redirect</a></li><li><a href="#keystone-render">.render</a></li><li><a href="#keystone-routes">.routes</a></li><li><a href="#keystone-set">.set</a></li><li><a href="#keystone-start">.start</a></li><li><a href="#keystone-static">.static</a></li><li><a href="#keystone-utils">.utils</a></li><li><a href="#keystone-version">.version</a></li><li><a href="#keystone-wrapHTMLError">.wrapHTMLError</a></li><li class="nav-label"><a href="#main-content">keystone.content</a></li><li><a href="#content-editable">.editable</a></li><li><a href="#content-fetch">.fetch</a></li><li><a href="#content-initModel">.initModel</a></li><li><a href="#content-page">.page</a></li><li><a href="#content-store">.store</a></li><li class="nav-label"><a href="#main-contentPage">keystone.content.Page</a></li><li><a href="#contentPage-add">.add</a></li><li><a href="#contentPage-clean">.clean</a></li><li><a href="#contentPage-get">.get</a></li><li><a href="#contentPage-name">.name</a></li><li><a href="#contentPage-populate">.populate</a></li><li><a href="#contentPage-register">.register</a></li><li><a href="#contentPage-set">.set</a></li><li><a href="#contentPage-validate">.validate</a></li><li class="nav-label"><a href="#main-contentType">keystone.content.Type</a></li><li class="nav-label"><a href="#main-email">keystone.email</a></li><li><a href="#email-buildOptions">.buildOptions</a></li><li><a href="#email-compileTemplate">.compileTemplate</a></li><li><a href="#email-defaults">.defaults</a></li><li><a href="#email-getEmailsPath">.getEmailsPath</a></li><li><a href="#email-loadTemplate">.loadTemplate</a></li><li><a href="#email-prepare">.prepare</a></li><li><a href="#email-render">.render</a></li><li><a href="#email-renderMandrill">.renderMandrill</a></li><li><a href="#email-send">.send</a></li><li><a href="#email-templateCSSMethods">.templateCSSMethods</a></li><li><a href="#email-templateCache">.templateCache</a></li><li class="nav-label"><a href="#main-field">keystone.field</a></li><li><a href="#field-addToSchema">.addToSchema</a></li><li><a href="#field-bindUnderscoreMethods">.bindUnderscoreMethods</a></li><li><a href="#field-col">.col</a></li><li><a href="#field-collapse">.collapse</a></li><li><a href="#field-dependsOn">.dependsOn</a></li><li><a href="#field-format">.format</a></li><li><a href="#field-getData">.getData</a></li><li><a href="#field-getDefaultValue">.getDefaultValue</a></li><li><a href="#field-getOptions">.getOptions</a></li><li><a href="#field-getPreSaveWatcher">.getPreSaveWatcher</a></li><li><a href="#field-getSize">.getSize</a></li><li><a href="#field-getValueFromData">.getValueFromData</a></li><li><a href="#field-hidden">.hidden</a></li><li><a href="#field-initial">.initial</a></li><li><a href="#field-isModified">.isModified</a></li><li><a href="#field-nocol">.nocol</a></li><li><a href="#field-noedit">.noedit</a></li><li><a href="#field-nofilter">.nofilter</a></li><li><a href="#field-nosort">.nosort</a></li><li><a href="#field-note">.note</a></li><li><a href="#field-required">.required</a></li><li><a href="#field-size">.size</a></li><li><a href="#field-underscoreMethod">.underscoreMethod</a></li><li><a href="#field-updateItem">.updateItem</a></li><li><a href="#field-validateInput">.validateInput</a></li><li class="nav-label"><a href="#main-fieldTypes">keystone.field.types</a></li><li><a href="#fieldTypes-AzureFile">.AzureFile</a></li><li><a href="#fieldTypes-Boolean">.Boolean</a></li><li><a href="#fieldTypes-CloudinaryImage">.CloudinaryImage</a></li><li><a href="#fieldTypes-CloudinaryImages">.CloudinaryImages</a></li><li><a href="#fieldTypes-Code">.Code</a></li><li><a href="#fieldTypes-Color">.Color</a></li><li><a href="#fieldTypes-Date">.Date</a></li><li><a href="#fieldTypes-DateArray">.DateArray</a></li><li><a href="#fieldTypes-Datetime">.Datetime</a></li><li><a href="#fieldTypes-Email">.Email</a></li><li><a href="#fieldTypes-Embedly">.Embedly</a></li><li><a href="#fieldTypes-GeoPoint">.GeoPoint</a></li><li><a href="#fieldTypes-Html">.Html</a></li><li><a href="#fieldTypes-Key">.Key</a></li><li><a href="#fieldTypes-LocalFile">.LocalFile</a></li><li><a href="#fieldTypes-LocalFiles">.LocalFiles</a></li><li><a href="#fieldTypes-Location">.Location</a></li><li><a href="#fieldTypes-Markdown">.Markdown</a></li><li><a href="#fieldTypes-Money">.Money</a></li><li><a href="#fieldTypes-Name">.Name</a></li><li><a href="#fieldTypes-Number">.Number</a></li><li><a href="#fieldTypes-NumberArray">.NumberArray</a></li><li><a href="#fieldTypes-Password">.Password</a></li><li><a href="#fieldTypes-Relationship">.Relationship</a></li><li><a href="#fieldTypes-S3File">.S3File</a></li><li><a href="#fieldTypes-Select">.Select</a></li><li><a href="#fieldTypes-Text">.Text</a></li><li><a href="#fieldTypes-TextArray">.TextArray</a></li><li><a href="#fieldTypes-Textarea">.Textarea</a></li><li><a href="#fieldTypes-Url">.Url</a></li><li class="nav-label"><a href="#main-list">keystone.list</a></li><li><a href="#list-add">.add</a></li><li><a href="#list-addFiltersToQuery">.addFiltersToQuery</a></li><li><a href="#list-addSearchToQuery">.addSearchToQuery</a></li><li><a href="#list-automap">.automap</a></li><li><a href="#list-expandColumns">.expandColumns</a></li><li><a href="#list-expandPaths">.expandPaths</a></li><li><a href="#list-expandSort">.expandSort</a></li><li><a href="#list-field">.field</a></li><li><a href="#list-getAdminURL">.getAdminURL</a></li><li><a href="#list-getCSV">.getCSV</a></li><li><a href="#list-getData">.getData</a></li><li><a href="#list-getDocumentName">.getDocumentName</a></li><li><a href="#list-getOptions">.getOptions</a></li><li><a href="#list-getPages">.getPages</a></li><li><a href="#list-getUniqueValue">.getUniqueValue</a></li><li><a href="#list-isReserved">.isReserved</a></li><li><a href="#list-map">.map</a></li><li><a href="#list-paginate">.paginate</a></li><li><a href="#list-register">.register</a></li><li><a href="#list-relationship">.relationship</a></li><li><a href="#list-selectColumns">.selectColumns</a></li><li><a href="#list-set">.set</a></li><li><a href="#list-underscoreMethod">.underscoreMethod</a></li><li><a href="#list-updateAll">.updateAll</a></li><li><a href="#schema-&lt;i&gt;schemaPlugins&lt;/i&gt;.autokey">.<i>schemaPlugins</i>.autokey</a></li><li><a href="#schema-&lt;i&gt;schemaPlugins&lt;/i&gt;.history">.<i>schemaPlugins</i>.history</a></li><li><a href="#schema-&lt;i&gt;schemaPlugins&lt;/i&gt;.sortable">.<i>schemaPlugins</i>.sortable</a></li><li><a href="#schema-&lt;i&gt;schemaPlugins&lt;/i&gt;.track">.<i>schemaPlugins</i>.track</a></li><li class="nav-label"><a href="#main-middleware">keystone.middleware</a></li><li><a href="#middleware-api">.api</a></li><li><a href="#middleware-cors">.cors</a></li><li class="nav-label"><a href="#main-security">keystone.security.csrf</a></li><li><a href="#security-createSecret">.createSecret</a></li><li><a href="#security-getSecret">.getSecret</a></li><li><a href="#security-getToken">.getToken</a></li><li><a href="#security-middleware">.middleware</a></li><li><a href="#security-requestToken">.requestToken</a></li><li><a href="#security-tokenize">.tokenize</a></li><li><a href="#security-validate">.validate</a></li><li class="nav-label"><a href="#main-session">keystone.session</a></li><li><a href="#session-keystoneAuth">.keystoneAuth</a></li><li><a href="#session-persist">.persist</a></li><li><a href="#session-signin">.signin</a></li><li><a href="#session-signinWithUser">.signinWithUser</a></li><li><a href="#session-signout">.signout</a></li><li class="nav-label"><a href="#main-view">keystone.view</a></li><li><a href="#view-on">.on</a></li><li><a href="#view-query">.query</a></li><li><a href="#view-render">.render</a></li></ul></div></div><nav class="docs-sidebar hidden-xs stickyMenu"><ul class="sidebar-nav"><li><a href="/docs" class="nav-heading">Docs Home</a></li><li><a href="/docs/api/current/class" class="nav-heading">Current</a></li><li class="active"><a href="/docs/api/incoming/class" class="nav-heading">Incoming</a></li><li><a href="/docs/api/0.2.x/class" class="nav-heading">0.2.x</a></li><li><a href="/docs/api/current/endpoint" class="nav-heading">Endpoint Api</a></li></ul><hr/><ul class="sidebar-nav"><li class="nav-label"><a href="#changelog">0.3.x to 0.4.x Changes</a></li><li class="nav-label"><a href="#main-keystone">keystone</a></li><li><a href="#keystone-adminApp">.adminApp</a></li><li><a href="#keystone-createItems">.createItems</a></li><li><a href="#keystone-expandPath">.expandPath</a></li><li><a href="#keystone-get">.get</a></li><li><a href="#keystone-getOrphanedLists">.getOrphanedLists</a></li><li><a href="#keystone-getPath">.getPath</a></li><li><a href="#keystone-importer">.importer</a></li><li><a href="#keystone-init">.init</a></li><li><a href="#keystone-initDatabase">.initDatabase</a></li><li><a href="#keystone-initExpressApp">.initExpressApp</a></li><li><a href="#keystone-initExpressSession">.initExpressSession</a></li><li><a href="#keystone-initNav">.initNav</a></li><li><a href="#keystone-list">.list</a></li><li><a href="#keystone-mount">.mount</a></li><li><a href="#keystone-openDatabaseConnection">.openDatabaseConnection</a></li><li><a href="#keystone-options">.options</a></li><li><a href="#keystone-populateRelated">.populateRelated</a></li><li><a href="#keystone-prefixModel">.prefixModel</a></li><li><a href="#keystone-redirect">.redirect</a></li><li><a href="#keystone-render">.render</a></li><li><a href="#keystone-routes">.routes</a></li><li><a href="#keystone-set">.set</a></li><li><a href="#keystone-start">.start</a></li><li><a href="#keystone-static">.static</a></li><li><a href="#keystone-utils">.utils</a></li><li><a href="#keystone-version">.version</a></li><li><a href="#keystone-wrapHTMLError">.wrapHTMLError</a></li><li class="nav-label"><a href="#main-content">keystone.content</a></li><li><a href="#content-editable">.editable</a></li><li><a href="#content-fetch">.fetch</a></li><li><a href="#content-initModel">.initModel</a></li><li><a href="#content-page">.page</a></li><li><a href="#content-store">.store</a></li><li class="nav-label"><a href="#main-contentPage">keystone.content.Page</a></li><li><a href="#contentPage-add">.add</a></li><li><a href="#contentPage-clean">.clean</a></li><li><a href="#contentPage-get">.get</a></li><li><a href="#contentPage-name">.name</a></li><li><a href="#contentPage-populate">.populate</a></li><li><a href="#contentPage-register">.register</a></li><li><a href="#contentPage-set">.set</a></li><li><a href="#contentPage-validate">.validate</a></li><li class="nav-label"><a href="#main-contentType">keystone.content.Type</a></li><li class="nav-label"><a href="#main-email">keystone.email</a></li><li><a href="#email-buildOptions">.buildOptions</a></li><li><a href="#email-compileTemplate">.compileTemplate</a></li><li><a href="#email-defaults">.defaults</a></li><li><a href="#email-getEmailsPath">.getEmailsPath</a></li><li><a href="#email-loadTemplate">.loadTemplate</a></li><li><a href="#email-prepare">.prepare</a></li><li><a href="#email-render">.render</a></li><li><a href="#email-renderMandrill">.renderMandrill</a></li><li><a href="#email-send">.send</a></li><li><a href="#email-templateCSSMethods">.templateCSSMethods</a></li><li><a href="#email-templateCache">.templateCache</a></li><li class="nav-label"><a href="#main-field">keystone.field</a></li><li><a href="#field-addToSchema">.addToSchema</a></li><li><a href="#field-bindUnderscoreMethods">.bindUnderscoreMethods</a></li><li><a href="#field-col">.col</a></li><li><a href="#field-collapse">.collapse</a></li><li><a href="#field-dependsOn">.dependsOn</a></li><li><a href="#field-format">.format</a></li><li><a href="#field-getData">.getData</a></li><li><a href="#field-getDefaultValue">.getDefaultValue</a></li><li><a href="#field-getOptions">.getOptions</a></li><li><a href="#field-getPreSaveWatcher">.getPreSaveWatcher</a></li><li><a href="#field-getSize">.getSize</a></li><li><a href="#field-getValueFromData">.getValueFromData</a></li><li><a href="#field-hidden">.hidden</a></li><li><a href="#field-initial">.initial</a></li><li><a href="#field-isModified">.isModified</a></li><li><a href="#field-nocol">.nocol</a></li><li><a href="#field-noedit">.noedit</a></li><li><a href="#field-nofilter">.nofilter</a></li><li><a href="#field-nosort">.nosort</a></li><li><a href="#field-note">.note</a></li><li><a href="#field-required">.required</a></li><li><a href="#field-size">.size</a></li><li><a href="#field-underscoreMethod">.underscoreMethod</a></li><li><a href="#field-updateItem">.updateItem</a></li><li><a href="#field-validateInput">.validateInput</a></li><li class="nav-label"><a href="#main-fieldTypes">keystone.field.types</a></li><li><a href="#fieldTypes-AzureFile">.AzureFile</a></li><li><a href="#fieldTypes-Boolean">.Boolean</a></li><li><a href="#fieldTypes-CloudinaryImage">.CloudinaryImage</a></li><li><a href="#fieldTypes-CloudinaryImages">.CloudinaryImages</a></li><li><a href="#fieldTypes-Code">.Code</a></li><li><a href="#fieldTypes-Color">.Color</a></li><li><a href="#fieldTypes-Date">.Date</a></li><li><a href="#fieldTypes-DateArray">.DateArray</a></li><li><a href="#fieldTypes-Datetime">.Datetime</a></li><li><a href="#fieldTypes-Email">.Email</a></li><li><a href="#fieldTypes-Embedly">.Embedly</a></li><li><a href="#fieldTypes-GeoPoint">.GeoPoint</a></li><li><a href="#fieldTypes-Html">.Html</a></li><li><a href="#fieldTypes-Key">.Key</a></li><li><a href="#fieldTypes-LocalFile">.LocalFile</a></li><li><a href="#fieldTypes-LocalFiles">.LocalFiles</a></li><li><a href="#fieldTypes-Location">.Location</a></li><li><a href="#fieldTypes-Markdown">.Markdown</a></li><li><a href="#fieldTypes-Money">.Money</a></li><li><a href="#fieldTypes-Name">.Name</a></li><li><a href="#fieldTypes-Number">.Number</a></li><li><a href="#fieldTypes-NumberArray">.NumberArray</a></li><li><a href="#fieldTypes-Password">.Password</a></li><li><a href="#fieldTypes-Relationship">.Relationship</a></li><li><a href="#fieldTypes-S3File">.S3File</a></li><li><a href="#fieldTypes-Select">.Select</a></li><li><a href="#fieldTypes-Text">.Text</a></li><li><a href="#fieldTypes-TextArray">.TextArray</a></li><li><a href="#fieldTypes-Textarea">.Textarea</a></li><li><a href="#fieldTypes-Url">.Url</a></li><li class="nav-label"><a href="#main-list">keystone.list</a></li><li><a href="#list-add">.add</a></li><li><a href="#list-addFiltersToQuery">.addFiltersToQuery</a></li><li><a href="#list-addSearchToQuery">.addSearchToQuery</a></li><li><a href="#list-automap">.automap</a></li><li><a href="#list-expandColumns">.expandColumns</a></li><li><a href="#list-expandPaths">.expandPaths</a></li><li><a href="#list-expandSort">.expandSort</a></li><li><a href="#list-field">.field</a></li><li><a href="#list-getAdminURL">.getAdminURL</a></li><li><a href="#list-getCSV">.getCSV</a></li><li><a href="#list-getData">.getData</a></li><li><a href="#list-getDocumentName">.getDocumentName</a></li><li><a href="#list-getOptions">.getOptions</a></li><li><a href="#list-getPages">.getPages</a></li><li><a href="#list-getUniqueValue">.getUniqueValue</a></li><li><a href="#list-isReserved">.isReserved</a></li><li><a href="#list-map">.map</a></li><li><a href="#list-paginate">.paginate</a></li><li><a href="#list-register">.register</a></li><li><a href="#list-relationship">.relationship</a></li><li><a href="#list-selectColumns">.selectColumns</a></li><li><a href="#list-set">.set</a></li><li><a href="#list-underscoreMethod">.underscoreMethod</a></li><li><a href="#list-updateAll">.updateAll</a></li><li><a href="#schema-&lt;i&gt;schemaPlugins&lt;/i&gt;.autokey">.<i>schemaPlugins</i>.autokey</a></li><li><a href="#schema-&lt;i&gt;schemaPlugins&lt;/i&gt;.history">.<i>schemaPlugins</i>.history</a></li><li><a href="#schema-&lt;i&gt;schemaPlugins&lt;/i&gt;.sortable">.<i>schemaPlugins</i>.sortable</a></li><li><a href="#schema-&lt;i&gt;schemaPlugins&lt;/i&gt;.track">.<i>schemaPlugins</i>.track</a></li><li class="nav-label"><a href="#main-middleware">keystone.middleware</a></li><li><a href="#middleware-api">.api</a></li><li><a href="#middleware-cors">.cors</a></li><li class="nav-label"><a href="#main-security">keystone.security.csrf</a></li><li><a href="#security-createSecret">.createSecret</a></li><li><a href="#security-getSecret">.getSecret</a></li><li><a href="#security-getToken">.getToken</a></li><li><a href="#security-middleware">.middleware</a></li><li><a href="#security-requestToken">.requestToken</a></li><li><a href="#security-tokenize">.tokenize</a></li><li><a href="#security-validate">.validate</a></li><li class="nav-label"><a href="#main-session">keystone.session</a></li><li><a href="#session-keystoneAuth">.keystoneAuth</a></li><li><a href="#session-persist">.persist</a></li><li><a href="#session-signin">.signin</a></li><li><a href="#session-signinWithUser">.signinWithUser</a></li><li><a href="#session-signout">.signout</a></li><li class="nav-label"><a href="#main-view">keystone.view</a></li><li><a href="#view-on">.on</a></li><li><a href="#view-query">.query</a></li><li><a href="#view-render">.render</a></li></ul></nav></div><div class="col-sm-9"><div class="docs-content"><h2><a name="methods"></a>0.4.x  reference</h2><a name="changelog"></a><h3> 0.3.x to 0.4.x Changes</h3><h4 id="core">Core</h4>
<ul>
<li>Removal of <code>keystone.connect</code>.  <strong>Express</strong> and <strong> Mongoose</strong> instances are now set during <code>keystone.init</code> where you can pass custom Express/Mongoose instances.  </li>
</ul>
<h4 id="list-class">List Class</h4>
<ul>
<li>Removal of <code>List.processFilters</code>.</li>
<li>Removal of <code>List.getSearchFilters</code>.</li>
</ul>
<h4 id="react-admin-ui">React Admin UI</h4>
<h4 id="fields">Fields</h4>
<h4 id="code">Code</h4>
<h4 id="endpoint-api">Endpoint Api</h4>
<a name="main-keystone"></a><h3>Keystone Class</h3><h4 id="new-keystone-">new Keystone( )</h4>
<blockquote>
<p><em>@return</em> <strong>Instance</strong>   </p>
</blockquote>
<p><div class="code-header" ><h4> The Keystone instance is a global object.</h4></div><pre class=" language-javascript  "><code  class=" language-javascript">var keystone = require(&#39;keystone&#39;); </code></pre> </p>
<p><div class="code-header" ><h4> defaults</h4>Set with:<br /><code>keystone.init({ &#39;key&#39;: value, ... })</code> <br />  <code>keystone.options({ &#39;key&#39;: value, ... })</code><br /><code>keystone.set(&#39;key&#39;, value)</code>  </div><pre class=" language-javascript  "><code  class=" language-javascript">this.express = express; // exposes express
this.lists = {};
this.paths = {}; </p>
<p>this._options = {
    &#39;name&#39;: &#39;Keystone&#39;,
    &#39;brand&#39;: &#39;Keystone&#39;,
    &#39;compress&#39;: true,
    &#39;headless&#39;: false,
    &#39;logger&#39;: &#39;:method :url :status :response-time ms&#39;,
    &#39;auto update&#39;: false,
    &#39;model prefix&#39;: null,
    &#39;module root&#39;: moduleRoot,
    &#39;frame guard&#39;: &#39;sameorigin&#39;,
    &#39;env&#39;: process.env.NODE_ENV || &#39;development&#39;,
    &#39;port&#39;: process.env.PORT || process.env.OPENSHIFT_NODEJS_PORT,
    &#39;host&#39;: process.env.HOST || process.env.IP || process.env.OPENSHIFT_NODEJS_IP,
    &#39;listen&#39;: process.env.LISTEN,
    &#39;ssl&#39;: process.env.SSL,
    &#39;ssl port&#39;: process.env.SSL_PORT,
    &#39;ssl host&#39;: process.env.SSL_HOST,
    &#39;ssl key&#39;: process.env.SSL_KEY,
    &#39;ssl cert&#39;: process.env.SSL_CERT,
    &#39;cookie secret&#39;: process.env.COOKIE_SECRET,
    &#39;cookie signin&#39;: this.get(&#39;env&#39;) === &#39;development&#39;) ? true : false,
    &#39;embedly api key&#39;: process.env.EMBEDLY_API_KEY || process.env.EMBEDLY_APIKEY,
    &#39;mandrill api key&#39;: process.env.MANDRILL_API_KEY || process.env.MANDRILL_APIKEY,
    &#39;mandrill username&#39;: process.env.MANDRILL_USERNAME,
    &#39;google api key&#39;:  process.env.GOOGLE_BROWSER_KEY,
    &#39;google server api key&#39;:  process.env.GOOGLE_SERVER_KEY,
    &#39;ga property&#39;:  process.env.GA_PROPERTY,
    &#39;ga domain&#39;: process.env.GA_DOMAIN,
    &#39;chartbeat property&#39;: process.env.CHARTBEAT_PROPERTY,
    &#39;chartbeat domain&#39;: process.env.CHARTBEAT_DOMAIN,
    &#39;allowed ip ranges&#39;: process.env.ALLOWED_IP_RANGES,
    // process.env.CLOUDINARY_URL is processed by the cloudinary package when this is set
    &#39;cloudinary config&#39;: process.env.CLOUDINARY_URL ? true : false,
    // s3 conditional on process.env.S3_<em> vars
    &#39;s3 config&#39;: { bucket: process.env.S3_BUCKET, key: process.env.S3_KEY, secret: process.env.S3_SECRET, region: process.env.S3<em>REGION }, 
    // azure conditional on process.env.AZURE</em></em> vars
    &#39;azurefile config&#39;: { account: process.env.AZURE_STORAGE_ACCOUNT, key: process.env.AZURE_STORAGE_ACCESS_KEY },</p>
<p>};</p>
<p></code></pre> </p>
<p><div class="code-header addGitHubLink" data-file="index.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-adminApp"></a><h4 id="-adminapp">.adminApp</h4>
<blockquote>
<p><em>@api</em> <strong>public</strong> </p>
</blockquote>
<p>Expose Admin UI App. </p>
<p><div class="code-header addGitHubLink" data-file="index.js#L123-L126"> &nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-createItems"></a><h4 id="-createitems-data-_options_-callback-">.createItems( data[, <em>options</em>], callback )</h4>
<blockquote>
<p><em>@param</em> <strong>data</strong> <em>{Object}</em>  - Create item data<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - <em>Optional</em> Object of options<br><em>@param</em> <strong>callback</strong> <em>{Function}</em>  - Callback function on done or error<br><em>@return</em> <strong>callback</strong> </p>
</blockquote>
<p>Keystone&#39;s <code>createItems</code> function is a simple but powerful way to populate your database with data.</p>
<p>It can be used to create <a href="http://en.wikipedia.org/wiki/Test_fixture">test fixtures</a> or initialise your database with default content / users / etc.</p>
<p>There&#39;s also a shorthand syntax that can be used within update files; if you are using the <code>auto updates</code> feature, any file that exports a <code>create</code> object will automatically be wrapped and the data will be created.</p>
<p><code>createItems</code> takes two passes at the data it is provided, first creating the items and retaining references by key (if provided) that can be used to populate relationships in the second pass. This makes it easy to create related data without asynchronous nesting (which for data creation sometimes ends up in knots).</p>
<p>The <code>data</code> argument should be an <code>Object</code> containing an <code>Array</code> for each <code>List</code> you want to populate. Each object in the array contains the data for a single item.</p>
<p>Each data property should match to a field path (or sub-field path) - all paths recognised by the <code>UpdateHandler</code> are usable.</p>
<p>A special property, <code>__ref</code>, can be set with a string value that is used to reference the item in relationships.</p>
<p>Relationship fields should contain either a string matching another item&#39;s <code>__ref</code> property, or (for <code>many: true</code> relationship fields) can contain an array of strings.</p>
<p>The <code>options</code> parameter can be used to override the default options.  </p>
<pre><code class="lang-javascript">var options = {
    verbose: false,
    strict: true
};
</code></pre>
<p>The <code>callback(err, stats)</code> function is passed the error (if there was one) and a stats object containing counts for each list of items that were created, and a special <code>message</code> property that can be parsed as Markdown or logged to the console.</p>
<pre><code class="lang-javascript">// This example demonstrates complete usage of keystone.createItems,
// and how to use its callback to log the message to the console.

function(done) {

    keystone.createItems({

        User: [{
            &#39;name.full&#39;: &#39;Jed Watson&#39;,
            email: &#39;jed@keystonejs.com&#39;,
            password: &#39;admin&#39;,
            isAdmin: true,
            __ref: &#39;jed&#39;
        }],

        PostCategory: [{
            name: &#39;Keystone JS&#39;,
            __ref: &#39;keystone&#39;
        }, {
            name: &#39;Node.js&#39;,
            __ref: &#39;node&#39;
        }],

        Post: [{
            title: &#39;A draft post&#39;,
            author: &#39;jed&#39;,
            &#39;content.brief&#39;: &#39;This is an example draft post.&#39;,
            categories: [&#39;keystone&#39;, &#39;node&#39;]
        }, {
            title: &#39;A published post&#39;,
            state: &#39;published&#39;,
            author: &#39;jed&#39;,
            publishedDate: &#39;2014-04-12&#39;,
            &#39;content.brief&#39;: &#39;This post has been published!&#39;,
            categories: &#39;node&#39;
        }]

    }, function(err, stats) {
        stats &amp;&amp; console.log(stats.message);
        done(err);
    });

}
</code></pre>
<pre><code class="lang-javascript">// This example demonstrates the shorthand syntax you can use to
// create items in a Keystone update script.

var keystone = require(&#39;keystone&#39;);

exports.create = {

    User: [{
        &#39;name.full&#39;: &#39;Jed Watson&#39;,
        email: &#39;jed@keystonejs.com&#39;,
        password: &#39;admin&#39;,
        isAdmin: true,
        __ref: &#39;jed&#39;
    }],

    PostCategory: [{
        name: &#39;Keystone JS&#39;,
        __ref: &#39;keystone&#39;
    }, {
        name: &#39;Node.js&#39;,
        __ref: &#39;node&#39;
    }],

    Post: [{
        title: &#39;A draft post&#39;,
        author: &#39;jed&#39;,
        &#39;content.brief&#39;: &#39;This is an example draft post.&#39;,
        categories: [&#39;keystone&#39;, &#39;node&#39;]
    }, {
        title: &#39;A published post&#39;,
        state: &#39;published&#39;,
        author: &#39;jed&#39;,
        publishedDate: &#39;2014-04-12&#39;,
        &#39;content.brief&#39;: &#39;This post has been published!&#39;,
        categories: &#39;node&#39;
    }]

};
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/core/createItems.js"> <a href="#" class="loadCode">code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-expandPath"></a><h4 id="-expandpath-path-">.expandPath( path )</h4>
<blockquote>
<p><em>@param</em> <strong>key</strong> <em>{String}</em>  - path<br><em>@return</em> <strong>expandedPath</strong> </p>
</blockquote>
<p>Expands a path to include moduleRoot if it is relative</p>
<pre><code class="lang-javascript">var path = keystone.expandPath(keystone.get(&#39;views&#39;));
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/core/options.js#L190-L204"> &nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-get"></a><h4 id="-get-key-">.get( key )</h4>
<blockquote>
<p><em>@param</em> <strong>key</strong> <em>{String}</em>  - Key of the option you want to retrieve<br><em>@return</em> <strong>value</strong> </p>
</blockquote>
<p>Get a Keystone option/value pair.</p>
<pre><code class="lang-javascript">var brand = keystone.get(&#39;brand&#39;);
// &gt;&gt; KeystoneJS
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/core/options.js#L177-L188"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-getOrphanedLists"></a><h4 id="-getorphanedlists-">.getOrphanedLists( )</h4>
<blockquote>
<p><em>@return</em> <strong>nav</strong> </p>
</blockquote>
<p>Retrieves orphaned lists (those not in a nav section)</p>
<pre><code class="lang-javascript">var orphanLists = keystone.getOrphanedLists();
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/core/getOrphanedLists.js"> <a href="#" class="loadCode"> code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-getPath"></a><h4 id="-getpath-key-defaultvalue-">.getPath( key, defaultValue )</h4>
<blockquote>
<p><em>@param</em> <strong>key</strong> <em>{String}</em>  - Key of the option you want to retrieve<br><em>@param</em> <strong>defaultValue</strong> <em>{String}</em>  - Default value if <code>key</code> is not a valid option<br><em>@return</em> <strong>path</strong> </p>
</blockquote>
<p>Gets an expanded path option, expanded to include moduleRoot if it is relative.  </p>
<pre><code class="lang-javascript">var path = keystone.getPath(&#39;views&#39;, &#39;templates/views&#39;);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/core/options.js#L206-L218"> &nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-importer"></a><h4 id="-importer-rel__dirname-">.importer( rel__dirname )</h4>
<blockquote>
<p><em>@param</em> <strong>rel__dirname</strong> <em>{String}</em>  - path<br><em>@return</em> <strong>imported</strong> </p>
</blockquote>
<p>Import all .js Modules in given path</p>
<pre><code class="lang-javascript">var importRoutes = keystone.importer(__dirname);

var routes = {
    site: importRoutes(&#39;./site&#39;),
    api: importRoutes(&#39;./api&#39;)
};
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/core/importer.js"> <a href="#" class="loadCode">code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-init"></a><h4 id="-init-options-">.init( options )</h4>
<blockquote>
<p><em>@param</em> <strong>options</strong> <em>{Object}</em> - set the intital value of Keystone options<br><em>@return</em> <strong>this</strong> </p>
</blockquote>
<p>Initialize the Keystone options object.  See <a href="http://keystonejs.com/docs/configuration/">Configuration Docs</a>.</p>
<p>If  Mongoose and/or Express references are not provided, they will be added during <code>.init</code>.  </p>
<pre><code class="lang-javascript">keystone.init({
    &#39;name&#39;: &#39;Keystone&#39;,
    &#39;brand&#39;: &#39;KeystoneJS&#39;,
    &#39;less&#39;: &#39;public&#39;,
    &#39;static&#39;: &#39;public&#39;,
    &#39;favicon&#39;: &#39;public/favicon.ico&#39;,
    &#39;views&#39;: &#39;templates/views&#39;,
    &#39;view engine&#39;: &#39;jade&#39;,
    &#39;emails&#39;: &#39;templates/emails&#39;,
    &#39;auto update&#39;: true,
    &#39;session&#39;: true,
    &#39;auth&#39;: true,
    &#39;user model&#39;: &#39;User&#39;,
    &#39;cookie secret&#39;: &#39;=Hw1WfV6XlGW(w~K8=&amp;5r%U2]EZ&#39;,

    &#39;app&#39;: app, // custom express instance
    &#39;mongoose&#39;: mongoose, // custom mongoose instance
});
</code></pre>
<p class="api-note">The minimum required to start a Keystone instance is the <code>cookie secret</code> option.</p>


<p><div class="code-header addGitHubLink" data-file="lib/core/init.js"> <a href="#" class="loadCode">code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-initDatabase"></a><h4 id="-initdatabase-">.initDatabase( )</h4>
<blockquote>
<p><em>@return</em> <strong>this</strong> </p>
</blockquote>
<p>Establish databse connection options if not available. </p>
<p><div class="code-header addGitHubLink" data-file="lib/core/initDatabase.js"> <a href="#" class="loadCode">code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-initExpressApp"></a><h4 id="-initexpressapp-">.initExpressApp( )</h4>
<blockquote>
<p><em>@return</em> <strong>this</strong> </p>
</blockquote>
<p>Creates initial  express app.  Runs <code>initDatabase</code> and <code>initExpressSession</code>.  </p>
<p><div class="code-header addGitHubLink" data-file="lib/core/initExpressApp.js"> <a href="#" class="loadCode">code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-initExpressSession"></a><h4 id="-initexpresssession-">.initExpressSession( )</h4>
<blockquote>
<p><em>@return</em> <strong>this</strong> </p>
</blockquote>
<p>Creates express session object. </p>
<p><div class="code-header" > <h4>Expose initialised session and options</h4> </div><pre class=" language-javascript hideCode api">
    keystone.set(&#39;session options&#39;, sessionOptions);
    keystone.expressSession = session(sessionOptions);
    keystone.sessionStorePromise = sessionStorePromise;
</pre>  </p>
<p><div class="code-header addGitHubLink" data-file="lib/core/initExpressSession.js"> <a href="#" class="loadCode">code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-initNav"></a><h4 id="-initnav-nav-">.initNav( nav )</h4>
<blockquote>
<p><em>@param</em> <strong>nav</strong> <em>{Object}</em><br><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p>Initialises Keystone&#39;s internal nav config.</p>
<p><div class="code-header addGitHubLink" data-file="lib/core/initNav.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-list"></a><h4 id="-list-arg-">.list( arg )</h4>
<blockquote>
<p><em>@param</em> <strong>arg</strong> <em>{...String|Function}</em>  - current list key or new constructed List<br><em>@return</em> <strong>list</strong> </p>
</blockquote>
<p>Registers or retrieves a list.  Used by <code>List.register()</code> to register a newly constructed List with Keystone.   </p>
<pre><code class="lang-javascript">var User = keystone.list(&#39;User&#39;);

User.model.find().exec(function(docs,err) {

});
</code></pre>
<p><p class="api-note">To retrieve a list that may return <code>undefined</code> you should use <code>keystone.lists[key]</code>.  Using <code>.list()</code> will throw a <code>ReferenceError</code> if the arg is not a valid <code>List</code> or the <code>key</code> for a valid <code>List</code> </p> `  </p>
<p><div class="code-header addGitHubLink" data-file="lib/core/list.js"> <a href="#" class="loadCode"> code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-mount"></a><h4 id="-mount-_mountpath_-_parentapp_-_events_-">.mount( [<em>mountPath</em>, <em>parentApp</em>, <em>events</em>] )</h4>
<blockquote>
<p><em>@param</em> <strong>mountPath</strong> <em>{String}</em>  - <em>Optional</em> Folder to mount Keystone as a sub-app<br><em>@param</em> <strong>parentApp</strong> <em>{Express()}</em>  - <em>Optional</em> Express app<br><em>@param</em> <strong>events</strong> <em>{...Function|Object}</em>  - <em>Optional</em> Object with onMount event or Function to run once mounted<br><em>@return</em> <strong>events.onMount()</strong> </p>
</blockquote>
<p>You can use <code>.mount()</code> for custom Express setups.<br><strong>mountPath</strong> is an optional path to mount Keystone under.<br><strong>parentApp</strong> will be your Express app.<br>The <strong>events</strong> parameter can be used to perform commands once Keystone has been mounted.<br>If <strong>events</strong> is a function it will get mapped to <code>{onMount: events}</code>.  </p>
<pre><code class="lang-javascript">/* Mount Keystone as a sub-app */

var app = express(),
    keystone = require(&#39;keystone&#39;),
    server,
    theEvents = require(&quot;events&quot;).EventEmitter;

/**
    Keystone supports the following options specifically for running in encapsulated mode (with no embedded server):  

       - name
       - port
       - views
       - view engine
       - compress
       - favico
       - less
       - static
       - headless
       - logger
       - cookie secret
       - session
       - 404
       - 500
       - routes
       - locals
       - auto update
       - app
       - mongoose
*/

keystone.init({ 
    app: app,
});

theEvents.on(&#39;keystone ready&#39;,function() {
    var server = app.listen(3000);
    console.log(&#39;server started&#39;);
});

keystone.mount(&#39;/content&#39;, app, {
    onMount: function() {
        //put your app&#39;s static content and error handling middleware here and start your server
       theEvents.emit(&#39;keystone ready&#39;);
    }
});
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/core/mount.js"> <a href="#" class="loadCode"> code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-openDatabaseConnection"></a><h4 id="-opendatabaseconnection-callback-">.openDatabaseConnection( callback )</h4>
<blockquote>
<p><em>@param</em> <strong>callback</strong> <em>{Function}</em><br><em>@return</em> <strong>this</strong> </p>
</blockquote>
<p>Create connection to database</p>
<p><div class="code-header addGitHubLink" data-file="lib/core/openDatabaseConnection.js"> <a href="#" class="loadCode">code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-options"></a><h4 id="-options-options-">.options( options )</h4>
<blockquote>
<p><em>@param</em> <strong>options</strong> <em>{Object}</em>  - An <strong>Object</strong> of key/value pairs to add to options.<br><em>@return</em> <strong>keystone._options</strong> </p>
</blockquote>
<p>Set multiple Keystone option/value pair.</p>
<pre><code class="lang-javascript">keystone.options({test: value});
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/core/options.js#L148-L174"> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-populateRelated"></a><h4 id="-populaterelated-docs-relationships-callback-">.populateRelated( docs, relationships, callback )</h4>
<blockquote>
<p><em>@param</em> <strong>docs</strong> <em>{Array}</em>  - Array of documents<br><em>@param</em> <strong>relationships</strong> <em>{Array}</em>  - Array of ref paths to populate<br><em>@param</em> <strong>callback</strong> <em>{Function}</em>  - Callback function on done or error<br><em>@return</em> <strong>callback</strong> </p>
</blockquote>
<p>Populate the related fields for an Array of docs.  </p>
<p class="caution-note">This is currently highly inefficient and should only be used in development, or for small data sets. There are lots of things that can be done to improve performance... later.</p>

<pre><code class="lang-javascript">keystone.populateRelated(docs,[&#39;owner&#39;,&#39;memberOf&#39;],function() {
    // docs are populated
});
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/core/populateRelated.js"> <a href="#" class="loadCode"> code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-prefixModel"></a><h4 id="-prefixmodel-key-">.prefixModel( key )</h4>
<blockquote>
<p><em>@param</em> <strong>key</strong> <em>{String}</em>  - collection name<br><em>@return</em> <strong>this</strong> </p>
</blockquote>
<p>Create proper model collection name with or without prefix. </p>
<p><div class="code-header addGitHubLink" data-file="index.js#L96-L104">  &nbsp;  </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-redirect"></a><h4 id="-redirect-params-">.redirect( ...params )</h4>
<blockquote>
<p><em>@param</em> <strong>params</strong> <em>{...String|Object}</em>  - String or Object of redirects<br><em>@return</em> <strong>callback events</strong> </p>
</blockquote>
<p>Adds one or more redirections (urls that are redirected when no matching routes are found, before treating the request as a 404)</p>
<pre><code class="lang-javascript">keystone.redirect(&#39;/old-route&#39;, &#39;new-route&#39;);

keystone.redirect({
    &#39;old-route&#39;: &#39;new-route&#39;
});
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/core/redirect.js"> <a href="#" class="loadCode"> code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-render"></a><h4 id="-render-req-res-view-ext-">.render( req, res, view, ext )</h4>
<blockquote>
<p><em>@param</em> <strong>req</strong> <em>{Object}</em>  -  Express req object<br><em>@param</em> <strong>res</strong> <em>{Object}</em>  -  Express res object<br><em>@param</em> <strong>view</strong> <em>{String}</em>  -  View to render<br><em>@param</em> <strong>ext</strong> <em>{Object}</em>  -  extend the locals object<br><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p>Internal method to render a view</p>
<p><div class="code-header addGitHubLink" data-file="lib/core/render.js"> <a href="#" class="loadCode"> code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-routes"></a><h4 id="-routes-app-">.routes( app )</h4>
<blockquote>
<p><em>@param</em> <strong>app</strong> <em>{Express()}</em>  - Express app instance<br><em>@return</em> <strong>this</strong> </p>
</blockquote>
<p>Adds bindings for the keystone routes</p>
<pre><code class="lang-javascript">var app = express();
app.use(...); // middlewareroutes, routes, etc. should come before keystone is mounted / started
keystone.routes(app);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/core/routes.js"> <a href="#" class="loadCode"> code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-set"></a><h4 id="-set-key-value-">.set( key, value )</h4>
<blockquote>
<p><em>@param</em> <strong>key</strong> <em>{String}</em>  - Key of the option you want to set<br><em>@param</em> <strong>value</strong> <em>{...String|Object|Function|Array}</em>  - Can be any valid <strong>Object</strong> value<br><em>@return</em> <strong>this</strong> </p>
</blockquote>
<p>Set a Keystone option/value pair.</p>
<pre><code class="lang-javascript">keystone.set(&#39;mongo&#39;,&#39;mongodb://localhost/keystone&#39;);

keystone.set(&#39;custom key&#39;,{key1:&#39;key1&#39;});
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/core/options.js#L41-L145"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-start"></a><h4 id="-start-_events_-">.start( [<em>events</em>] )</h4>
<blockquote>
<p><em>@param</em> <strong>events</strong> <em>{...Function|Object}</em>  - Function or Object of events<br><em>@return</em> <strong>callback events</strong> </p>
</blockquote>
<p>Start the Keystone server.  You can work with the events in the example.</p>
<pre><code class="lang-javascript">keystone.start({
    onMount: function() {

    },
    onStart: function() {

    },
    onHttpServerCreated: function() {

    },
    onHttpsServerCreated: function() {

    },
    onSocketServerCreated: function() {

    },
});
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/core/start.js"> <a href="#" class="loadCode"> code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-static"></a><h4 id="-static-app-">.static ( app )</h4>
<blockquote>
<p><em>@param</em> <strong>app</strong> {Object} - Express app</p>
</blockquote>
<p>Legacy Attach Mechanisms </p>
<p><div class="code-header addGitHubLink" data-file="index.js#L128-L133"> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-utils"></a><h4 id="-utils">.utils</h4>
<blockquote>
<p><em>@api</em> <strong>public</strong> </p>
</blockquote>
<p><div class="code-header"> <h4>Expose <code>keystone-utils</code></h4></div><pre class=" language-javascript"><code class="language-javascript">Keystone.utils = require(&#39;keystone-utils&#39;);</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="index.js#L154"> &nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-version"></a><h4 id="-version">.version</h4>
<blockquote>
<p><em>@api</em> <strong>public</strong> {Number} </p>
</blockquote>
<p>Current version</p>
<p><div class="code-header addGitHubLink" data-file="index.js#L236-L242"> &nbsp;  </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="keystone-wrapHTMLError"></a><h4 id="-wraphtmlerror-title-_err_-">.wrapHTMLError( title, [<em>err</em>] )</h4>
<blockquote>
<p><em>@param</em> <strong>title</strong> <em>{String}</em>  - Error title<br><em>@param</em> <strong>err</strong> <em>{String}</em>  - <em>Optional</em> Error message<br><em>@return</em> <strong>html</strong> </p>
</blockquote>
<p>Wraps an error in simple HTML to be sent as a response to the browser</p>
<pre><code class="lang-javascript">var html = keystone.wrapHTMLError(&#39;Credential Error&#39;,&#39;Please &lt;a href=&quot;/keystone/signin&quot;&gt;login&lt;/a&gt; to view this page&#39;);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/core/wrapHTMLError.js"> <a href="#" class="loadCode"> code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="main-content"></a><h3>.content Class</h3><h4 id="keystone-content-">Keystone.content(  )</h4>
<blockquote>
<p><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p><div class="code-header addGitHubLink" data-file="lib/content/index.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="content-editable"></a><h4 id="-content-editable-user-options-">.content.editable( user, options )</h4>
<blockquote>
<p><em>@param</em> <strong>user</strong> <em>{Object}</em>  - user object<br><em>@param</em> <strong>options</strong> <em>{Object}</em><br><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Outputs client-side editable data for content management.  </p>
<p>Called automatically when pages are added.  </p>
<p><div class="code-header addGitHubLink" data-file="lib/content/index.js#L196-L233"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="content-fetch"></a><h4 id="-content-fetch-page-callback-">.content.fetch( page, callback )</h4>
<blockquote>
<p><em>@param</em> <strong>page</strong> <em>{String}</em><br><em>@param</em> <strong>callback</strong> <em>{Function}</em><br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p><div class="code-header"> <h4>Loads page content by page key (optional).</h4>If page key is not provided, returns a hash of all page contents in the database.</div><pre class=" language-javascript"><code class="language-javascript">keystone.content.fetch(&#39;home&#39;, function(err, content) { ... });</code></pre> </p>
<p><div class="code-header addGitHubLink" data-file="lib/content/index.js#L15-L82"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="content-initModel"></a><h4 id="-content-initmodel-">.content.initModel( )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>      </p>
</blockquote>
<p>Ensures the Mongoose model for storing content is initialised.  </p>
<p>Called automatically when pages are added.  </p>
<p><div class="code-header addGitHubLink" data-file="lib/content/index.js#L166-L194"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="content-page"></a><h4 id="-content-page-key-page-">.content.page( key, page )</h4>
<blockquote>
<p><em>@param</em> <strong>key</strong> <em>{String}</em><br><em>@param</em> <strong>page</strong> <em>{Object}</em><br><em>@api</em> <strong>private</strong>     </p>
</blockquote>
<p>Registers a page. Should not be called directly, use <code>.content.Page.register()</code> instead.</p>
<p><div class="code-header addGitHubLink" data-file="lib/content/index.js#L131-L164"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="content-store"></a><h4 id="-content-store-page-content-callback-">.content.store( page, content, callback )</h4>
<blockquote>
<p><em>@param</em> <strong>page</strong> <em>{String}</em><br><em>@param</em> <strong>content</strong> <em>{Object}</em><br><em>@param</em> <strong>callback</strong> <em>{Function}</em><br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p><div class="code-header"> <h4>Sets page content by page key.</h4>Merges content with existing content.</div><pre class=" language-javascript"><code class="language-javascript">keystone.content.store(&#39;home&#39;, { title: &#39;Welcome&#39; }, function(err) { ... });</code></pre> </p>
<p><div class="code-header addGitHubLink" data-file="lib/content/index.js#L84-L129"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="main-contentPage"></a><h3>.content.Page Class</h3><h4 id="keystone-content-page-key-options-">Keystone.content.Page( key, options )</h4>
<blockquote>
<p><em>@param</em> <strong>key</strong>  {String}<br><em>@param</em> <strong>options</strong>  {Options}<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p><div class="code-header addGitHubLink" data-file="lib/content/page.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="contentPage-add"></a><h4 id="-content-page-add-fields-">.content.Page.add( fields )</h4>
<blockquote>
<p><em>@param</em> <strong>fields</strong> <em>{Object}</em><br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p><div class="code-header addGitHubLink" data-file="lib/content/page.js#L73-L124"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="contentPage-clean"></a><h4 id="-content-page-clean-data-">.content.Page.clean( data )</h4>
<blockquote>
<p><em>@param</em> <strong>data</strong> <em>{Object}</em><br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Cleans a data structure so only the defined fields are present.</p>
<p><div class="code-header addGitHubLink" data-file="lib/content/page.js#L181-L197"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="contentPage-get"></a><h4 id="-content-page-get-key-">.content.Page.get( key )</h4>
<blockquote>
<p><em>@param</em> <strong>key</strong> <em>{String}</em><br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p><div class="code-header"> <h4>Gets page options</h4></div><pre class=" language-javascript"><code class="language-javascript"> page.get(&#39;test&#39;) // returns the &#39;test&#39; value
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="lib/content/page.js#L59-L69"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="contentPage-name"></a><h4 id="-content-page-name">.content.Page.name</h4>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p><div class="code-header"> <h4>Getter</h4></div><pre class=" language-javascript"><code class="language-javascript">return this.get(&#39;name&#39;) || this.set(&#39;name&#39;, utils.keyToLabel(this.key));</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="lib/content/page.js#L29-L33"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="contentPage-populate"></a><h4 id="-content-page-populate-data-">.content.Page.populate( data )</h4>
<blockquote>
<p><em>@param</em> <strong>data</strong> <em>{Object}</em><br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Populates a data structure based on defined fields</p>
<p><div class="code-header addGitHubLink" data-file="lib/content/page.js#L145-L161"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="contentPage-register"></a><h4 id="-content-page-register-">.content.Page.register(  )</h4>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p><div class="code-header"> <h4>Registers the page with Keystone.</h4></div><pre class=" language-javascript"><code class="language-javascript">var homePage = new keystone.content.Page(&#39;home&#39;);
// ...
homePage.register();</p>
<pre><code>// later...
var homePage = keystone.content.page(&#39;home&#39;);
</code></pre><p></code></pre></p>
<p><div class="code-header addGitHubLink" data-file="lib/content/page.js#L59-L69"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="contentPage-set"></a><h4 id="-content-page-set-key-value-">.content.Page.set( key, value )</h4>
<blockquote>
<p><em>@param</em> <strong>key</strong> <em>{String}</em><br><em>@param</em> <strong>value</strong> <em>{Array|Function|Object|String}</em><br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p><div class="code-header"> <h4>Sets page options.</h4></div><pre class=" language-javascript"><code class="language-javascript">page.set(&#39;test&#39;, value) // sets the &#39;test&#39; option to <code>value</code></code></pre></p>
<p><div class="code-header addGitHubLink" data-file="lib/content/page.js#L35-L56"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="contentPage-validate"></a><h4 id="-content-page-validate-data-">.content.Page.validate( data )</h4>
<blockquote>
<p><em>@param</em> <strong>data</strong> <em>{Object}</em><br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Validates a data structure based on defined fields.</p>
<p><div class="code-header addGitHubLink" data-file="lib/content/page.js#L163-L179"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="main-contentType"></a><h3>.content.Type Class</h3><h4 id="keystone-content-type-path-options-">Keystone.content.Type( path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>path</strong>  {String}<br><em>@param</em> <strong>options</strong>  {Options}<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p class="warning-note">TODO</p>

<p><div class="code-header addGitHubLink" data-file="lib/content/type.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="main-email"></a><h3>.Email Class</h3><h4 id="new-keystone-email-options-">new Keystone.Email( options )</h4>
<blockquote>
<p><em>@param</em> <strong>options</strong> <em>{...String|Object}</em><br><em>@return</em> <strong>this</strong>     </p>
</blockquote>
<p>Once created, emails can be sent with Mandrill, or rendered for viewing.   </p>
<p class="api-note">Passing a <strong>String</strong> will set <code>templateName</code> and use <a href="#email-defaults"><code>Email.defaults</code></a>.</p>
<p class="caution-note"> Requires setting Keystone option <code>emails</code>  to render.  <br />Requires setting either <code>options.mandrill</code> or Keystone option <code>mandrill api key</code>  to send.   </p>    

<p><strong> <code>options</code> </strong>:   </p>
<ul>
<li><strong>templateName</strong> - The name of the template to render.  Default use should be the name of a jade template file or directory. Required if not using <code>templateMandrillName</code>.   </li>
<li><strong>templateExt</strong> - The extension name of our template file.  A template must be available at <code>templateName.templateExt</code> or <code>templateName/email.templateExt</code>.  </li>
<li><strong>templateEngine</strong> - The engine to use to render the email html.  Defaults to <code>require(&#39;jade&#39;)</code>  </li>
<li><strong>templateBasePath</strong> - Base path to load email template files.   </li>
<li><strong>templateCompile</strong> - A custom template compiler.    Use in conjunction with <code>templateRender</code>.  <pre><code class="lang-javascript">// example for nunjucks  
options.templateCompile: function(engine, contents, opts, path) {
  return engine.compile(contents, opts, path); //calling compile() on the nunjucks engine, and returning the compiled template
},
</code></pre>
</li>
<li><strong>templateRender</strong> - A custom renderer function.  Use in conjunction with <code>templateCompile</code>.  <pre><code class="lang-javascript">// example for nunjucks  
options.templateRender: function(template, locals) {
  return template.render(locals); //calling the nunjucks compiled template render()
},
</code></pre>
</li>
<li><strong>templateMandrillName</strong> - Name of a Mandrill template to use to render emails.    </li>
<li><strong>templateMandrillContent</strong> - An <strong>Array</strong> of content blocks for a Mandrill template. <pre><code class="lang-javascript">options.templateMandrillContent = [
  {
      &quot;name&quot;: &quot;header&quot;,
      &quot;content&quot;: &quot;&lt;h2&gt;&quot; + keystone.get(&#39;name&#39;) + &quot;&lt;/h2&gt;&quot;
  }
]
</code></pre>
</li>
</ul>
<div class="code-header"> <h4>Create a new Email instance and send an Email</h4></div><pre class=" language-javascript"><code class="language-javascript">
    var Email = new keystone.Email(&#39;welcome&#39;);
    Email.send({
        subject:&#39;Your  account information&#39;,
        tags:&#39;new user&#39;,
        to:newUser.realEmail,
        fromName:&#39;Account Team&#39;,
        fromEmail:&#39;support@domain.tld&#39;,
        enquiry: {
            _: require(&#39;lodash&#39;),
            name:newUser.name.first+&#39;  &#39;+newUser.name.last,
            email:newUser.realEmail,
            html:&#39;&#39;
        }
    },function(err,info){
        //console.log(err,&#39;New user email sent&#39;,info);
    });
</code></pre>

<div class="contextual-note">
<h4> Explanation</h4> 
<p>We pass <code>&#39;welcome&#39;</code> as our template name. <br />Since we set <code>keystone.init({ ..., &#39;emails&#39;: &#39;templates/emails&#39;})</code> the class looked in <code>/templates/emails/welcome.jade</code> and <code>/templates/emails/welcome/email.jade</code> for the template to use to render the email.</p>
</div>  


<p><div class="code-header addGitHubLink" data-file="lib/email.js#L125-L170"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="email-buildOptions"></a><h4 id="email-buildoptions-err-options-_callback_-">Email.buildOptions( err, options [, <em>callback</em>] )</h4>
<blockquote>
<p><em>@param</em> <strong>err</strong> <em>{Object}</em>  - Error<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - Input options<br><em>@param</em> <strong>callback</strong> <em>{Object}</em>  - callback(err, message)<br><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Build an options object.</p>
<p><div class="code-header addGitHubLink" data-file="lib/email.js#L379-L535"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="email-compileTemplate"></a><h4 id="email-compiletemplate-_callback_-">Email.compileTemplate(  <em>callback</em>  )</h4>
<blockquote>
<p><em>@param</em> <strong>callback</strong> <em>{Object}</em>  - callback(err, email)<br><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Ensures the template for the email has been compiled</p>
<p><div class="code-header addGitHubLink" data-file="lib/email.js#L309-L342"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="email-defaults"></a><h4 id="email-defaults">Email.defaults</h4>
<blockquote>
<p><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>Email.defaults </h4></div><pre class=" language-javascript"><code class="language-javascript">{
    templateExt: &#39;jade&#39;,
    templateEngine: require(&#39;jade&#39;),
    templateBasePath: path.normalize(path.join(__dirname, &#39;..&#39;, &#39;templates&#39;, &#39;helpers&#39;, &#39;emails&#39;)),
    mandrill: {
        track_opens: true,
        track_clicks: true,
        preserve_recipients: false,
        inline_css: true
    },
    // Mandrill template
    templateMandrillName: null,
    templateForceHtml: false // Force html render
}
</code></pre> </p>
<p><div class="code-header addGitHubLink" data-file="lib/email.js#L12-L25"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="email-getEmailsPath"></a><h4 id="email-getemailspath-">Email.getEmailsPath(  )</h4>
<blockquote>
<p><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Return the value of <code>keystone.get(&#39;emails&#39;);</code>.</p>
<p><div class="code-header addGitHubLink" data-file="lib/email.js#L58-L64"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="email-loadTemplate"></a><h4 id="email-loadtemplate-_callback_-">Email.loadTemplate(  <em>callback</em>  )</h4>
<blockquote>
<p><em>@param</em> <strong>callback</strong> <em>{Object}</em>  - callback(err, email)<br><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Loads the template. Looks for <code>templateName.templateExt</code>, followed by <code>templateName/email.templateExt</code></p>
<p><div class="code-header addGitHubLink" data-file="lib/email.js#L273-L307"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="email-prepare"></a><h4 id="email-prepare-options-_callback_-">Email.prepare( options [, <em>callback</em> ] )</h4>
<blockquote>
<p><em>@param</em> <strong>options</strong> <em>{Object}</em>  - locals<br><em>@param</em> <strong>callback</strong> <em>{Object}</em>  - callback(err, message)<br><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Ensures the template for the email has been compiled</p>
<p><div class="code-header addGitHubLink" data-file="lib/email.js#L344-L377"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="email-render"></a><h4 id="email-render-locals-_callback_-">Email.render( locals [, <em>callback</em> ] )</h4>
<blockquote>
<p><em>@param</em> <strong>locals</strong> <em>{Object}</em>  - object of local variables provided to the template<br><em>@param</em> <strong>callback</strong> <em>{Object}</em>  - callback(err, email)  </p>
</blockquote>
<p>Renders the email and passes it to the callback. Used by <code>Email.send()</code> but can also be called directly to generate a preview.</p>
<p><div class="code-header addGitHubLink" data-file="lib/email.js#L172-L270"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="email-renderMandrill"></a><h4 id="email-rendermandrill-_locals_-options-_callback_-">Email.renderMandrill( [<em>locals</em> ,] options [, <em>callback</em> ] )</h4>
<blockquote>
<p><em>@param</em> <strong>locals</strong> <em>{Object}</em>  - backwards compatibility<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - locals options object<br><em>@param</em> <strong>callback</strong> <em>{Object}</em>  - callback(err, info)      </p>
</blockquote>
<p>Renders a Mandrill template</p>
<p><div class="code-header addGitHubLink" data-file="lib/email.js#L637-L689"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="email-send"></a><h4 id="email-send-_locals-_-options-_callback_-">Email.send( [ <em>locals </em> ,] options [, <em>callback</em> ] )</h4>
<blockquote>
<p><em>@param</em> <strong>locals</strong> <em>{Object}</em>  - backwards compatibility<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - passed to <code>Email.render()</code><br><em>@param</em> <strong>callback</strong> <em>{Object}</em>  - callback(err, info)    </p>
</blockquote>
<p class="api-note"> For compatibility with older implementations, send supports providing locals and options objects as the first and second arguments, and the callback as the third.  Typical use case should be <code>.send( options, callback )</code></p>

<p> Options:</p>
<ul>
<li><strong>mandrill</strong> - Initialised Mandrill API instance</li>
<li><strong>templateMandrillName</strong> - the immutable name or slug of a template that exists in the user&#39;s account. For backwards-compatibility, the template name may also be used but the immutable slug is preferred.  Validation: required.  </li>
<li><strong>templateMandrillContent</strong> - an <strong>Array</strong> of template content to send. Adds to existing blocks set on Instance creation.  Each item in the array should be an object with two keys - name: the name of the content block to set the content for, and content: the actual content to put into the block<pre><code class="lang-javascript"> options.templateMandrillContent = [
     {
         &quot;name&quot;: &quot;header&quot;,
         &quot;content&quot;: &quot;&lt;h2&gt;&quot; + keystone.get(&#39;name&#39;) + &quot;&lt;/h2&gt;&quot;
     }
 ]
</code></pre>
</li>
<li><strong>tags</strong> - an array of <strong>Strings</strong> to tag the message with. Stats are accumulated using tags, and only the first 100 are stored, so this should not be unique or change frequently. Tags should be 50 characters or less. Any tags starting with an underscore are reserved for internal use and will cause errors.   </li>
<li><strong>html</strong> - the full HTML content to be sent </li>
<li><strong>attachments</strong> - an array of supported attachments to add to the message  <pre><code class="lang-javascript"> options.attachments = [
     {
         type: MIME_TYPE,
         name: FILE_NAME,
         content: BASE64_STRING
     },
 ]
</code></pre>
</li>
<li><strong>to</strong> - Object / String or Array of Objects / Strings to send to, e.g.  <pre><code class="lang-javascript">[&#39;email2@domain.tld&#39;, { email: &#39;email@domain.tld&#39; }]
{ email: &#39;email4@domain.tld&#39; }
&#39;email0@domain.tld&#39;
</code></pre>
</li>
<li><strong>from</strong> - <code>{ name: &#39;Ted&#39;, email: &#39;ted@domain.tld&#39; }</code> or <code>&#39;ted@domain.tld&#39;</code>  </li>
<li><strong>fromName</strong> - Name to send from  </li>
<li><strong>fromEmail</strong> - Email address to send from</li>
<li><strong>mandrillOptions</strong> - any other <a href="https://mandrillapp.com/api/docs/messages.JSON.html#method=send-template" target="_blank"> Mandrill <strong>message</strong> Option</a> <pre><code class="lang-javascript"> options.mandrillOptions = {
     // whether or not to turn on open tracking for the message
     track_opens: true,
     // whether or not to turn on click tracking for the message
     track_clicks: true, 
     // whether or not to expose all recipients in the &quot;To&quot; header for each email
     preserve_recipients: false, 
     // whether or not to automatically inline all CSS styles provided 
     // in the message HTML - only for HTML documents less than 256KB in size
     inline_css: true 
 },
</code></pre>
</li>
</ul>
<p class="caution-note"> You must include an  email address with either <code>from</code> or <code>fromEmail</code> </p>

<div class="code-header"> <h4>Send an email</h4></div><pre class=" language-javascript"><code class="language-javascript">
     var Email = new keystone.Email({ 
                templateMandrillName: &#39;welcome&#39;,
                templateMandrillContent: [
                    {
                        &quot;name&quot;: &quot;header&quot;,
                        &quot;content&quot;: &quot;<h2>&quot; + keystone.get(&#39;name&#39;) + &quot;</h2>&quot;
                    }
                ]
            });

            Email.send({
                to: req.body.email,
                from: {
                    name: &#39;from name&#39;,
                    email: &#39;from@domain.tld&#39;
                },
                subject: &#39;subject&#39;
                templateMandrillContent: [
                    {
                        &quot;name&quot;: &quot;main&quot;,
                        &quot;content&quot;: &quot;custom html for main block&quot;
                    }
                ],
                mandrillOptions: {
                    track_opens: false,
                    track_clicks: false
                },
            }, 
            function(err, info) {
                //console.log(err, info);
            });
</code></pre>
<div class="contextual-note">
<h4> Explanation</h4> 
<p>We defined a template at Mandrill and set <code>templateMandrillName: &#39;welcome&#39;</code>. This will bypass <code>Email.render()</code> and send template information.  <br /> We add <code>templateMandrillContent</code> template blocks in both the <strong>Email</strong> constructor and in <code>.send</code>.  </p>
</div> 


<p><div class="code-header addGitHubLink" data-file="lib/email.js#L537-L630"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="email-templateCSSMethods"></a><h4 id="email-templatecssmethods-shadecolor-color-percent-">Email.templateCSSMethods.shadeColor( color, percent )</h4>
<blockquote>
<p><em>@param</em> <strong>color</strong> {String}<br><em>@param</em> <strong>percent</strong> {Number}<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>return a shaded color.</p>
<p><div class="code-header addGitHubLink" data-file="lib/email.js#L114-L121"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="email-templateCache"></a><h4 id="email-templatecache">Email.templateCache</h4>
<blockquote>
<p><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>A cache of compiled templates organi(sz)ed by name.</p>
<p><div class="code-header addGitHubLink" data-file="lib/email.js#L692"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="main-field"></a><h3>.Field super</h3><h4 id="keystone-field-list-path-options-">Keystone.Field( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p><p class="contextual-note"> Extended by <code>Field.Types</code> Classes, methods should not be used directly. </p></p>
<p><div class="code-header" > <h4>Extend</h4>file named customType.js</div><pre class=" language-javascript "><code  class=" language-javascript ">var keystone = require(&#39;keystone&#39;);
var util = require(&#39;util&#39;);</p>
<p>/**</p>
<ul>
<li>Custom FieldType Constructor</li>
<li>@extends Field</li>
<li><p>@api public
*/
function custom(list, path, options) {
 // add your options to this</p>
<p> // call super<em>
 custom.super</em>_.call(this, list, path, options);
}
// inherit the 
util.inherits(custom, keystone.Field);</p>
</li>
</ul>
<p>/<em> override or add methods </em>/
custom.prototype.addToSchema = function() {
    // how to add to schema</p>
<p>}</p>
<p>/<em> Export Field Type </em>/
exports = module.exports = custom;
</code></pre> </p>
<p><div class="code-header" > <h4>main file</div><pre class=" language-javascript "><code  class=" language-javascript ">var keystone = require(&#39;keystone&#39;);
Object.defineProperty(keystone.Field.Types, &#39;myField&#39;, { get: function() {
    return require(./customType.js&#39;);
} });</p>
<p></code></pre> </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-addToSchema"></a><h4 id="field-addtoschema-">Field.addToSchema(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Default method to register the field on the List&#39;s Mongoose Schema.  </p>
<p class="caution-note">Overridden by some fieldType Classes.</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L218-L228"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-bindUnderscoreMethods"></a><h4 id="field-bindunderscoremethods-methods-">Field.bindUnderscoreMethods( methods )</h4>
<blockquote>
<p><em>@param</em> <strong>methods</strong> {Array}<br><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Automatically bind underscore methods specified by the _underscoreMethods property.</p>
<p class="note">Will always include the &#39;update&#39; method</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L230-L246"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-col"></a><h4 id="field-col-">Field.col(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>Getter</h4></div><pre class=" language-javascript"><code class="language-javascript">return this.options.col
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L209"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-collapse"></a><h4 id="field-collapse-">Field.collapse(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p><div class="code-header"> <h4>Getter</h4></div><pre class=" language-javascript"><code class="language-javascript">return this.options.collapse
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L214"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-dependsOn"></a><h4 id="field-dependson-">Field.dependsOn(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p><div class="code-header"> <h4>Getter</h4></div><pre class=" language-javascript"><code class="language-javascript">return this.options.dependsOn
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L216"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-format"></a><h4 id="field-format-item-">Field.format( item )</h4>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Default method to format the field value for display.  </p>
<p class="caution-note">Overridden by some fieldType Classes.</p>


<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L127-L154"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-getData"></a><h4 id="field-getdata-data-">Field.getData( data )</h4>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Gets the field&#39;s data from an Item, as used by the React components</p>
<p><div class="code-header"> <h4>Return</h4></div><pre class=" language-javascript"><code class="language-javascript">return item.get(this.path);
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L131-L136"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-getDefaultValue"></a><h4 id="field-getdefaultvalue-">Field.getDefaultValue(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Gets default value for the field, based on the option or default for the type</p>
<p><div class="code-header"> <h4>Return</h4></div><pre class=" language-javascript"><code class="language-javascript">return this.options.default
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L124-L129"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-getOptions"></a><h4 id="field-getoptions-">Field.getOptions(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Gets the options for the Field, as used by the React components.</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L83-L107"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-getPreSaveWatcher"></a><h4 id="field-getpresavewatcher-">Field.getPreSaveWatcher(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p>Field watching implementation</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L138-L201"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-getSize"></a><h4 id="field-getsize-">Field.getSize( )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Validates and returns the size of the field.<br>Defaults to deprecated &#39;width&#39; option.</p>
<p><div class="code-header"> <h4>Return</h4></div><pre class=" language-javascript"><code class="language-javascript">return this.__size
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L109-L122"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-getValueFromData"></a><h4 id="field-getvaluefromdata-data-">Field.getValueFromData( data )</h4>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>private</strong>    </p>
</blockquote>
<p>Retrieves the value from an object, whether the path is nested or flattened.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L311-L318"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-hidden"></a><h4 id="field-hidden-">Field.hidden(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p><div class="code-header"> <h4>Getter</h4></div><pre class=" language-javascript"><code class="language-javascript">return this.options.hidden
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L215"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-initial"></a><h4 id="field-initial-">Field.initial(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p><div class="code-header"> <h4>Getter</h4></div><pre class=" language-javascript"><code class="language-javascript">return this.options.initial
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L206"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-isModified"></a><h4 id="field-ismodified-item-">Field.isModified( item )</h4>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Default method to detect whether the field has been modified in an item.  </p>
<p class="caution-note">Overridden by some fieldType Classes.</p>


<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L270-L278"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-nocol"></a><h4 id="field-nocol-">Field.nocol(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p><div class="code-header"> <h4>Getter</h4></div><pre class=" language-javascript"><code class="language-javascript">return this.options.nocol
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L211"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-noedit"></a><h4 id="field-noedit-">Field.noedit(   )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p><div class="code-header"> <h4>Getter</h4></div><pre class=" language-javascript"><code class="language-javascript">return this.options.noedit
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L210"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-nofilter"></a><h4 id="field-nofilter-">Field.nofilter(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p><div class="code-header"> <h4>Getter</h4></div><pre class=" language-javascript"><code class="language-javascript">return this.options.nofilter
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L213"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-nosort"></a><h4 id="field-nosort-">Field.nosort(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p><div class="code-header"> <h4>Getter</h4></div><pre class=" language-javascript"><code class="language-javascript">return this.options.nosort
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L212"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-note"></a><h4 id="field-note-">Field.note(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>Getter</h4></div><pre class=" language-javascript"><code class="language-javascript">
return this.options.note
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L208"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-required"></a><h4 id="field-required-">Field.required(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>Getter</h4></div><pre class=" language-javascript"><code class="language-javascript">return this.options.required
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L207"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-size"></a><h4 id="field-size-">Field.size(  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p><div class="code-header"> <h4>Getter</h4></div><pre class=" language-javascript"><code class="language-javascript">return this.getSize()
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L205"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-underscoreMethod"></a><h4 id="field-underscoremethod-path-fn-">Field.underscoreMethod( path, fn )</h4>
<blockquote>
<p><em>@param</em> <strong>path</strong> {String} 
<em>@param</em> <strong>item</strong> {Function} 
<em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p>Adds a method to the underscoreMethods collection on the field&#39;s list, with a path prefix to match this field&#39;s path and bound to the document.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L248-L258"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-updateItem"></a><h4 id="field-updateitem-item-data-">Field.updateItem( item, data )</h4>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@param</em> <strong>data</strong> {Object}<br><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object</p>
<p class="caution-note">Overridden by some fieldType Classes.</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L297-L309"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="field-validateInput"></a><h4 id="field-validateinput-data-required-item-">Field.validateInput( data [, required, item ] )</h4>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@param</em> <strong>required</strong> {Boolean} - true if this is a required field<br><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@api</em> <strong>private</strong>  </p>
</blockquote>
<p>Validates that a value for this field has been provided in a data object</p>
<p class="caution-note">Overridden by some fieldType Classes.</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/Type.js#L280-L295"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="main-fieldTypes"></a><h3>.Field.Types Classes</h3><h4 id="-field-types">.Field.Types</h4>
<p>Returns an object of Keystone Field Types to work with.<br>Each Field Type inherits all the <code>Field</code> methods above.  </p>
<p><p class="note">Any new or override methods for each Type are <span class="subMethod"> styled like so </span>. 
</p>
Field Type Classes are located at:<br><strong>/fields/types/<i>fieldtype</i>/<i>Fieldtype</i>Type.js</strong>  </p>
<p>Each Field Type has React class constructors on top of their unique methods.</p>
<h5 id="column-support">Column Support</h5>
<p><strong>/fields/types/<i>fieldtype</i>/<i>Fieldtype</i>Columns.js</strong>  </p>
<h5 id="field-html">Field HTML</h5>
<p><strong>/fields/types/<i>fieldtype</i>/<i>Fieldtype</i>Field.js</strong>  </p>
<h5 id="filters">Filters</h5>
<p><strong>/fields/types/<i>fieldtype</i>/<i>Fieldtype</i>Filters.js</strong>  </p>
<p><div class="code-header addGitHubLink" data-file="lib/fieldTypes.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-AzureFile"></a><h4 id="-field-types-azurefile-list-path-options-">.Field.Types.AzureFile( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._underscoreMethods = [&#39;format&#39;, &#39;uploadFile&#39;];  </p>
<p>this._fixedSize = &#39;full&#39;;</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/azurefile/AzureFileType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre>  </p>
<p><span class="subMethod"> .Field.Types.AzureFile.azurefileconfig   </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Exposes the custom or keystone azure config settings.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/azurefile/AzureFileType.js#L67-L75">&nbsp; </div><pre class=" language-javascript hideCode api"></pre>  </p>
<hr>
<p><span class="subMethod"> .Field.Types.AzureFile.addToSchema(  ) </span>  </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Registers the field on the List&#39;s Mongoose Schema.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/azurefile/AzureFileType.js#L78-L173"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.AzureFile.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.</p>
<pre><code class="lang-javascript">return item.get(this.paths.url);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/azurefile/AzureFileType.js#L176-L184"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.AzureFile.isModified( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Detects whether the field has been modified.  </p>
<pre><code class="lang-javascript">return item.isModified(this.paths.url);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/azurefile/AzureFileType.js#L187-L195">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.AzureFile.validateInput( data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Validates that a value for this field has been provided in a data object </p>
<p class="warning-note"> TODO - will only return true</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/azurefile/AzureFileType.js#L198-L207"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.AzureFile.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object</p>
<p class="warning-note"> TODO - will not return</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/azurefile/AzureFileType.js#L210-L218"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.AzureFile.uploadFile( item, file, update [, callback] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>file</strong> {Object} - valid file object<br><em>@param</em> <strong>update</strong> {Boolean} - update or not<br><em>@param</em> <strong>callback</strong> {Function} - callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Uploads the file for this field.</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/azurefile/AzureFileType.js#L221-L277"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.AzureFile.getRequestHandler( item, req [, paths, callback] )  </span></p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>req</strong> {Object} - express req object<br><em>@param</em> <strong>paths</strong> {Object} - valid field paths (optional)<br><em>@param</em> <strong>callback</strong> {Function} - optional callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Returns a callback that handles a standard form submission for the field.<br>Expected form parts are:<br><code>field.paths.action</code> in <code>req.body</code> (<code>clear</code> or <code>delete</code>)<br><code>field.paths.upload</code> in <code>req.files</code> (uploads the file to Azure)  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/azurefile/AzureFileType.js#L280-L320">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.AzureFile.handleRequest( item, req [, paths, callback] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>req</strong> {Object} - express req object<br><em>@param</em> <strong>paths</strong> {Object} - valid field paths (optional)<br><em>@param</em> <strong>callback</strong> {Function} - optional callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Immediately handles a standard form submission for the field (see <code>.Field.Types.AzureFile.getRequestHandler()</code>).  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/azurefile/AzureFileType.js#L323-L331"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Boolean"></a><h4 id="-field-types-boolean-list-path-options-">.Field.Types.Boolean( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = Boolean;
this._properties = [&#39;indent&#39;];
this._fixedSize = &#39;full&#39;;
this.indent = (options.indent) ? true : false;</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/boolean/BooleanType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre>  </p>
<p><span class="subMethod"> .Field.Types.Boolean.addFilterToQuery( filter, query ) </span>   </p>
<blockquote>
<p><em>@param</em> <strong>filter</strong> {Object} - valid filter object<br><em>@param</em> <strong>query</strong> {Object} - valid query object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Add filters to a query.    </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/boolean/BooleanType.js#L18-L29">&nbsp; </div><pre class=" language-javascript hideCode api"></pre>  </p>
<hr>
<p><span class="subMethod"> .Field.Types.Boolean.validateInput( data [, required ] ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid filter object<br><em>@param</em> <strong>required</strong> {Boolean} - (optional)<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Validates that a truthy value for this field has been provided in a data object.<br>Useful for checkboxes that are required to be true (e.g. agreed to terms and cond&#39;s).  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/boolean/BooleanType.js#L31-L41"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Boolean.updateItem( item, data ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@param</em> <strong>data</strong> {Object} - valid data value object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Updates the value for this field in the item from a data object.<br>Only updates the value if it has changed.<br>Treats a falsy value or the string &quot;false&quot; as <code>false</code>, everything else as true.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/boolean/BooleanType.js#L176-L184"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-CloudinaryImage"></a><h4 id="-field-types-cloudinaryimage-list-path-options-">.Field.Types.CloudinaryImage( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._underscoreMethods = [&#39;format&#39;];
this._fixedSize = &#39;full&#39;;
this._properties = [&#39;select&#39;, &#39;selectPrefix&#39;, &#39;autoCleanup&#39;, &#39;publicID&#39;, &#39;folder&#39;, &#39;filenameAsPublicID&#39;];
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimage/CloudinaryImageType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.CloudinaryImage.addToSchema(  ) </span>  </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Registers the field on the List&#39;s Mongoose Schema.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimage/CloudinaryImageType.js#L56-L270"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.CloudinaryImage.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.</p>
<pre><code class="lang-javascript">return item.get(this.paths.url);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimage/CloudinaryImageType.js#L273-L281"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.CloudinaryImage.isModified( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Detects whether the field has been modified.  </p>
<pre><code class="lang-javascript">return item.isModified(this.paths.url);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimage/CloudinaryImageType.js#L284-L292">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.CloudinaryImage.validateInput( data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Validates that a value for this field has been provided in a data object </p>
<p class="warning-note"> TODO - will only return true</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimage/CloudinaryImageType.js#L295-L304"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.CloudinaryImage.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object </p>
<p class="warning-note"> TODO - will not return</p>


<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimage/CloudinaryImageType.js#L307-L329"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.CloudinaryImage.getRequestHandler( item, req [, paths, callback] )  </span></p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>req</strong> {Object} - express req object<br><em>@param</em> <strong>paths</strong> {Object} - valid field paths (optional)<br><em>@param</em> <strong>callback</strong> {Function} - optional callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Returns a callback that handles a standard form submission for the field.<br>Expected form parts are:<br><code>field.paths.action</code> in <code>req.body</code> (<code>clear</code> or <code>delete</code>)<br><code>field.paths.upload</code> in <code>req.files</code> (uploads the image to cloudinary)  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimage/CloudinaryImageType.js#L332-L446">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.CloudinaryImage.handleRequest( item, req [, paths, callback] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>req</strong> {Object} - express req object<br><em>@param</em> <strong>paths</strong> {Object} - valid field paths (optional)<br><em>@param</em> <strong>callback</strong> {Function} - optional callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Immediately handles a standard form submission for the field (see <code>.Field.Types.CloudinaryImage.getRequestHandler()</code>).  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimage/CloudinaryImageType.js#L449-L457"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-CloudinaryImages"></a><h4 id="-field-types-cloudinaryimages-list-path-options-">.Field.Types.CloudinaryImages( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._underscoreMethods = [&#39;format&#39;];
this._fixedSize = &#39;full&#39;;
this._properties = [&#39;select&#39;, &#39;selectPrefix&#39;, &#39;autoCleanup&#39;, &#39;publicID&#39;, &#39;folder&#39;, &#39;filenameAsPublicID&#39;];
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimages/CloudinaryImagesType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.CloudinaryImages.addToSchema(  ) </span>  </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Registers the field on the List&#39;s Mongoose Schema.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimages/CloudinaryImagesType.js#L51-L195"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.CloudinaryImages.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.</p>
<pre><code class="lang-javascript">return item.get(this.paths.url);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimages/CloudinaryImagesType.js#L198-L208"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.CloudinaryImages.isModified( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Detects whether the field has been modified.  </p>
<pre><code class="lang-javascript">return item.isModified(this.paths.url);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimages/CloudinaryImagesType.js#L211-L220">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.CloudinaryImages.validateInput( data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Validates that a value for this field has been provided in a data object </p>
<p class="warning-note"> TODO - will only return true</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimages/CloudinaryImagesType.js#L223-L232"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.CloudinaryImages.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object</p>
<p class="warning-note"> TODO - will not return</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimages/CloudinaryImagesType.js#L235-L243"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.CloudinaryImages.getRequestHandler( item, req [, paths, callback] )  </span></p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>req</strong> {Object} - express req object<br><em>@param</em> <strong>paths</strong> {Object} - valid field paths (optional)<br><em>@param</em> <strong>callback</strong> {Function} - optional callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Returns a callback that handles a standard form submission for the field.<br>Expected form parts are:<br><code>field.paths.action</code> in <code>req.body</code> (<code>clear</code> or <code>delete</code>)<br><code>field.paths.upload</code> in <code>req.files</code> (uploads the image to cloudinary)  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimages/CloudinaryImagesType.js#L246-L350">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.CloudinaryImages.handleRequest( item, req [, paths, callback] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>req</strong> {Object} - express req object<br><em>@param</em> <strong>paths</strong> {Object} - valid field paths (optional)<br><em>@param</em> <strong>callback</strong> {Function} - optional callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Immediately handles a standard form submission for the field (see <code>.Field.Types.CloudinaryImage.getRequestHandler()</code>).  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/cloudinaryimages/CloudinaryImagesType.js#L363-L371"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Code"></a><h4 id="-field-types-code-list-path-options-">.Field.Types.Code( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = String;
this._defaultSize = &#39;full&#39;;
this.height = options.height || 180;
this.lang = options.lang || options.language;
this.<em>properties = [&#39;editor&#39;, &#39;height&#39;, &#39;lang&#39;];
this.codemirror = options.codemirror || {};
this.editor = </em>.defaults(this.codemirror, { mode : this.lang });</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/code/CodeType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.Code.addFilterToQuery( filter, query ) </span>   </p>
<blockquote>
<p><em>@param</em> <strong>filter</strong> {Object} - valid filter object<br><em>@param</em> <strong>query</strong> {Object} - valid query object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Add filters to a query.    </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/code/CodeType.js#L23-L24">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Color"></a><h4 id="-field-types-color-list-path-options-">.Field.Types.Color( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = String;
this._underscoreMethods = [];
this._fixedSize = &#39;small&#39;;</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/color/ColorType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Date"></a><h4 id="-field-types-date-list-path-options-">.Field.Types.Date( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = Date;
this._underscoreMethods = [&#39;format&#39;, &#39;moment&#39;, &#39;parse&#39;];
this._fixedSize = &#39;medium&#39;;
this._properties = [&#39;formatString&#39;, &#39;yearRange&#39;, &#39;isUTC&#39;];
this.parseFormatString = options.parseFormat || &#39;YYYY-MM-DD&#39;;
this.formatString = (options.format === false) ? false : (options.format || &#39;Do MMM YYYY&#39;);
this.yearRange = options.yearRange;
this.isUTC = options.utc || false;</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/date/DateType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.Date.addFilterToQuery( filter, query ) </span>   </p>
<blockquote>
<p><em>@param</em> <strong>filter</strong> {Object} - valid filter object<br><em>@param</em> <strong>query</strong> {Object} - valid query object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Add filters to a query.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/date/DateType.js#L27-L58"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Date.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/date/DateType.js#L60-L69"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Date.moment( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Returns a new <code>moment</code> object with the field value.    </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/date/DateType.js#L71-L78">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Date.parse( item )  </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Parses input using moment, sets the value, and returns the moment object.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/date/DateType.js#L80-L88">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Date.validateInput( data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Checks that a valid date has been provided in a data object.<br>An empty value clears the stored value and is considered valid.</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/date/DateType.js#L90-L104"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Date.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/date/DateType.js#L106-L122"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-DateArray"></a><h4 id="-field-types-datearray-list-path-options-">.Field.Types.DateArray( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = [Date];
this._defaultSize = &#39;medium&#39;;
this._underscoreMethods = [&#39;format&#39;];
this._properties = [&#39;formatString&#39;];
this.parseFormatString = options.parseFormat || &#39;YYYY-MM-DD&#39;;
this.formatString = (options.format === false) ? false : (options.format || &#39;Do MMM YYYY&#39;);</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/datearray/DateArrayType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.DateArray.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/datearray/DateArrayType.js#L38-L50"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.DateArray.validateInput( data [, required, item ] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@param</em> <strong>required</strong> {Boolean} - true if this is a required field<br><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Checks that a valid array of dates has been provided in a data object.<br>An empty value clears the stored value and is considered valid.</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/datearray/DateArrayType.js#L52-L101"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.DateArray.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/datearray/DateArrayType.js#L104-L133"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Datetime"></a><h4 id="-field-types-datetime-list-path-options-">.Field.Types.Datetime( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">var parseFormats = [&#39;YYYY-MM-DD&#39;, &#39;YYYY-MM-DD h:m:s a&#39;, &#39;YYYY-MM-DD h:m a&#39;, &#39;YYYY-MM-DD H:m:s&#39;, &#39;YYYY-MM-DD H:m&#39;];</p>
<p>...
this._nativeType = Date;
this._underscoreMethods = [&#39;format&#39;, &#39;moment&#39;, &#39;parse&#39;];
this._fixedSize = &#39;full&#39;;
this._properties = [&#39;formatString&#39;, &#39;isUTC&#39;];
this.typeDescription = &#39;date and time&#39;;
this.parseFormatString = options.parseFormat || parseFormats;
this.formatString = (options.format === false) ? false : (options.format || &#39;YYYY-MM-DD h:m:s a&#39;);
this.isUTC = options.utc || false;</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/datetime/DatetimeType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.Datetime.addFilterToQuery( filter, query ) </span>   </p>
<blockquote>
<p><em>@param</em> <strong>filter</strong> {Object} - valid filter object<br><em>@param</em> <strong>query</strong> {Object} - valid query object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Add filters to a query.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/datetime/DatetimeType.js#L34"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Datetime.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/datetime/DatetimeType.js#L35"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Datetime.moment( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Returns a new <code>moment</code> object with the field value.    </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/datetime/DatetimeType.js#L36">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Datetime.parse( item )  </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Parses input using moment, sets the value, and returns the moment object.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/datetime/DatetimeType.js#L37">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Datetime.getInputFromData( data ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Get the value from a data object; may be simple or a pair of fields</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/datetime/DatetimeType.js#L39-L48"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Datetime.validateInput( data [, required, item ] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@param</em> <strong>required</strong> {Boolean} - true if this is a required field<br><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Checks that a valid date has been provided in a data object<br>An empty value clears the stored value and is considered valid.</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/datetime/DatetimeType.js#L50-L64"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Datetime.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/datetime/DatetimeType.js#L66-L82"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Email"></a><h4 id="-field-types-email-list-path-options-">.Field.Types.Email( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = String;
this._underscoreMethods = [&#39;gravatarUrl&#39;];
this.typeDescription = &#39;email address&#39;;
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/email/EmailType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.Email.addFilterToQuery( filter, query ) </span>   </p>
<blockquote>
<p><em>@param</em> <strong>filter</strong> {Object} - valid filter object<br><em>@param</em> <strong>query</strong> {Object} - valid query object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Add filters to a query.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/email/EmailType.js#L21"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Email.gravatarUrl( item, size, defaultImage, rating ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@param</em> <strong>size</strong> {Number} - size of images ranging from 1 to 2048 pixels, square<br><em>@param</em> <strong>defaultImage</strong> {String}<br><em>@param</em> <strong>rating</strong> {String}<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Get the value from a data object; may be simple or a pair of fields</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/email/EmailType.js#L23-L43"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Email.validateInput( data [, required, item ] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@param</em> <strong>required</strong> {Boolean} - true if this is a required field<br><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Validates that a valid email has been provided in a data object</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/email/EmailType.js#L45-L55"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Email.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object.<br>Ensures that the email address is lowercase.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/email/EmailType.js#L57-L69"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Embedly"></a><h4 id="-field-types-embedly-list-path-options-">.Field.Types.Embedly( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p class="caution-note">Requires the option <code>from</code> to refer to another path in the schema that provides the url to expand.</p>

<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">
this._underscoreMethods = [&#39;reset&#39;];
this._fixedSize = &#39;full&#39;;</p>
<p>this.fromPath = options.from;
this.embedlyOptions = options.options || {};</p>
<p>// TODO: implement filtering, usage disabled for now
options.nofilter = true;</p>
<p></code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/embedly/EmbedlyType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre>  </p>
<hr>
<p><span class="subMethod"> .Field.Types.Embedly.addToSchema(  ) </span>      </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Registers the field on the List&#39;s Mongoose Schema.    </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/embedly/EmbedlyType.js#L63-L182"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Embedly.reset( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p><div class="code-header"> <h4>Resets the value of the field</h4></div><pre class=" language-javascript"><code class="language-javascript">{
    exists: false,
    type: null,
    title: null,
    url: null,
    width: null,
    height: null,
    version: null,
    description: null,
    html: null,
    authorName: null,
    authorUrl: null,
    providerName: null,
    providerUrl: null,
    thumbnailUrl: null,
    thumbnailWidth: null,
    thumbnailHeight: null
}</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/embedly/EmbedlyType.js#L185-L210"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Embedly.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.</p>
<pre><code class="lang-javascript">return item.get(this.paths.html);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/embedly/EmbedlyType.js#L213-L221"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Embedly.isModified( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Detects whether the field has been modified.  </p>
<pre><code class="lang-javascript">// Assume that it has changed if the url is different
return item.isModified(this.paths.url);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/embedly/EmbedlyType.js#L224-L233">&nbsp; </div><pre class=" language-javascript hideCode api"></pre></p>
<hr>
<p><span class="subMethod"> .Field.Types.Embedly.validateInput( data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p class="caution-note">Embedly fields do not incur validation and will always return <code>true</code>. </p>

<p><div class="code-header addGitHubLink" data-file="fields/types/embedly/EmbedlyType.js#L236-L245"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Embedly.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object.    </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/embedly/EmbedlyType.js#L248-L275"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-GeoPoint"></a><h4 id="-field-types-geopoint-list-path-options-">.Field.Types.GeoPoint( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._fixedSize = &#39;medium&#39;;</p>
<p>// TODO: implement filtering, usage disabled for now
options.nofilter = true;</p>
<p></code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/geopoint/GeoPointType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.GeoPoint.addToSchema(  ) </span>      </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Registers the field on the List&#39;s Mongoose Schema.<br>Adds a 2dsphere indexed lat/lng pair.      </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/geopoint/GeoPointType.js#L34-L45"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.GeoPoint.getData( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Gets the field&#39;s data from an Item, as used by the React components</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/geopoint/GeoPointType.js#L48-L55"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.GeoPoint.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.</p>
<pre><code class="lang-javascript">return item.get(this.paths.html);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/geopoint/GeoPointType.js#L58-L69"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.GeoPoint.validateInput( data [, required, item ] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@param</em> <strong>required</strong> {Boolean} - true if this is a required field<br><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Validates that a value for this field has been provided in a data object.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/geopoint/GeoPointType.js#L72-L93"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.GeoPoint.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object.    </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/geopoint/GeoPointType.js#L96-L130"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Html"></a><h4 id="-field-types-html-list-path-options-">.Field.Types.Html( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = String;
this._defaultSize = &#39;full&#39;;
this.wysiwyg = options.wysiwyg || false;
this.height = options.height || 180;
this._properties = [&#39;wysiwyg&#39;, &#39;height&#39;];</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/html/HtmlType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre>  </p>
<p><span class="subMethod"> .Field.Types.Html.addFilterToQuery( filter, query ) </span>   </p>
<blockquote>
<p><em>@param</em> <strong>filter</strong> {Object} - valid filter object<br><em>@param</em> <strong>query</strong> {Object} - valid query object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Add filters to a query.    </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/html/HtmlType.js#L21">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Key"></a><h4 id="-field-types-key-list-path-options-">.Field.Types.Key( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = String;
this._defaultSize = &#39;medium&#39;;
this.separator = options.separator || &#39;-&#39;;</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/key/KeyType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre>  </p>
<p><span class="subMethod"> .Field.Types.Key.addFilterToQuery( filter, query ) </span>   </p>
<blockquote>
<p><em>@param</em> <strong>filter</strong> {Object} - valid filter object<br><em>@param</em> <strong>query</strong> {Object} - valid query object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Add filters to a query.    </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/key/KeyType.js#L20">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Key.generateKey( str ) </span>     </p>
<blockquote>
<p><em>@param</em> <strong>str</strong> {String}<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Generates a valid key from a string</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/key/KeyType.js#L22-L27"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Key.validateInput( data [, required, item ] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@param</em> <strong>required</strong> {Boolean} - true if this is a required field<br><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Checks that a valid key has been provided in a data object</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/key/KeyType.js#L29-L39"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Key.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object.<br>Ensures that the email address is lowercase.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/key/KeyType.js#L41-L53"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-LocalFile"></a><h4 id="-field-types-localfile-list-path-options-">.Field.Types.LocalFile( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._underscoreMethods = [&#39;format&#39;, &#39;uploadFile&#39;];
this._fixedSize = &#39;full&#39;;</p>
<p>// TODO: implement filtering, usage disabled for now
options.nofilter = true;
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfile/LocalFileType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.LocalFile.addToSchema(  ) </span>  </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Registers the field on the List&#39;s Mongoose Schema.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfile/LocalFileType.js#L65-L167"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFile.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.
Delegates to the options.format function if it exists.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfile/LocalFileType.js#L170-L185"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFile.hasFormatter(  ) </span> </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Detects whether the field has formatter function in <code>options.format</code></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfile/LocalFileType.js#L188-L196">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFile.href( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Return the public href for the stored file  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfile/LocalFileType.js#L199-L209">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFile.isModified( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Detects whether the field has been modified.  </p>
<pre><code class="lang-javascript">return item.isModified(this.paths.path);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfile/LocalFileType.js#L212-L220">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFile.validateInput( data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p class="warning-note"> TODO (if needed) - will only return true</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/localfile/LocalFileType.js#L295-L304"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFile.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p class="warning-note"> TODO - direct updating of data (not via upload) - will not currently return</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/localfile/LocalFileType.js#L235-L243"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFile.uploadFile( item, file, update [, callback] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>file</strong> {Object} - valid file object<br><em>@param</em> <strong>update</strong> {Boolean} - update or not<br><em>@param</em> <strong>callback</strong> {Function} - callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Uploads the file for this field.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfile/LocalFileType.js#L246-L304"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFile.getRequestHandler( item, req [, paths, callback] )  </span></p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>req</strong> {Object} - express req object<br><em>@param</em> <strong>paths</strong> {Object} - valid field paths (optional)<br><em>@param</em> <strong>callback</strong> {Function} - optional callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Returns a callback that handles a standard form submission for the field.<br>Expected form parts are:<br><code>field.paths.action</code> in <code>req.body</code> (<code>clear</code> or <code>delete</code>)<br><code>field.paths.upload</code> in <code>req.files</code> (uploads the image to localfile)  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfile/LocalFileType.js#L307-L348">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFile.handleRequest( item, req [, paths, callback] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>req</strong> {Object} - express req object<br><em>@param</em> <strong>paths</strong> {Object} - valid field paths (optional)<br><em>@param</em> <strong>callback</strong> {Function} - optional callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Immediately handles a standard form submission for the field (see <code>.Field.Types.LocalFile.getRequestHandler()</code>).  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfile/LocalFileType.js#L351-L359"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre></p>
<hr><a name="fieldTypes-LocalFiles"></a><h4 id="-field-types-localfiles-list-path-options-">.Field.Types.LocalFiles( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._underscoreMethods = [&#39;format&#39;, &#39;uploadFile&#39;];
this._fixedSize = &#39;full&#39;;</p>
<p>// TODO: implement filtering, usage disabled for now
options.nofilter = true;
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfiles/LocalFilesType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.LocalFiles.addToSchema(  ) </span>  </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Registers the field on the List&#39;s Mongoose Schema.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfiles/LocalFilesType.js#L67-L193"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFiles.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.
Delegates to the options.format function if it exists.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfiles/LocalFilesType.js#L196-L214"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFiles.hasFormatter(  ) </span> </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Detects whether the field has formatter function in <code>options.format</code></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfiles/LocalFilesType.js#L217-L225">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFiles.href( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Return the public href for a single stored file  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfiles/LocalFilesType.js#L228-L238">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFiles.isModified( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Detects whether the field has been modified.  </p>
<pre><code class="lang-javascript">return item.isModified(this.paths.path);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfiles/LocalFilesType.js#L241-L249">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFiles.validateInput( data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p class="warning-note"> TODO (if needed) - will only return true</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/localfiles/LocalFilesType.js#L252-L261"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFiles.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p class="warning-note"> TODO - direct updating of data (not via upload) - will not currently return</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/localfiles/LocalFilesType.js#L264-L272"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFiles.uploadFiles( item, file, update [, callback] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>file</strong> {Object} - valid file object<br><em>@param</em> <strong>update</strong> {Boolean} - update or not<br><em>@param</em> <strong>callback</strong> {Function} - callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Uploads the files for this field.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfiles/LocalFilesType.js#L275-L339"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFiles.getRequestHandler( item, req [, paths, callback] )  </span></p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>req</strong> {Object} - express req object<br><em>@param</em> <strong>paths</strong> {Object} - valid field paths (optional)<br><em>@param</em> <strong>callback</strong> {Function} - optional callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Returns a callback that handles a standard form submission for the field.<br>Expected form parts are:<br><code>field.paths.action</code> in <code>req.body</code> (<code>clear</code> or <code>delete</code>)<br><code>field.paths.upload</code> in <code>req.files</code> (uploads the image to localfiles)  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfiles/LocalFilesType.js#L352-L421">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.LocalFiles.handleRequest( item, req [, paths, callback] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>req</strong> {Object} - express req object<br><em>@param</em> <strong>paths</strong> {Object} - valid field paths (optional)<br><em>@param</em> <strong>callback</strong> {Function} - optional callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Immediately handles a standard form submission for the field (see <code>.Field.Types.LocalFiles.getRequestHandler()</code>).  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/localfiles/LocalFilesType.js#L424-L432"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre></p>
<hr><a name="fieldTypes-Location"></a><h4 id="-field-types-location-list-path-options-">.Field.Types.Location( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._underscoreMethods = [&#39;format&#39;, &#39;googleLookup&#39;, &#39;kmFrom&#39;, &#39;milesFrom&#39;];
this._fixedSize = &#39;full&#39;;</p>
<p>this.enableMapsAPI = (options.geocodeGoogle===true || (options.geocodeGoogle !== false &amp;&amp; keystone.get(&#39;google server api key&#39;))) ? true : false;</p>
<p>this._properties = [&#39;enableMapsAPI&#39;];
this.requiredPaths = [&#39;street1&#39;, &#39;suburb&#39;];</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/location/LocationType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.Location.addToSchema(  ) </span>  </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Registers the field on the List&#39;s Mongoose Schema.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/location/LocationType.js#L62-L138"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Location.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats a list of the values stored by the field. Only paths that have values will be included.<br>Optionally provide a space-separated list of values to include.<br>Delimiter defaults to <code>&#39;, &#39;</code>.</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/location/LocationType.js#L141-L166"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Location.isModified( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Detects whether the field has been modified.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/location/LocationType.js#L169-L185">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Location.validateInput( data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Validates that a value for this field has been provided in a data object.<br><code>options.required</code> specifies an Array or space-delimited list of paths that are required (defaults to street1, suburb).  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/location/LocationType.js#L188-L230"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Location.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object.</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/location/LocationType.js#L233-L293"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Location.getRequestHandler( item, req [, paths, callback ] )  </span></p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>req</strong> {Object} - valid file object<br><em>@param</em> <strong>paths</strong> {Object} - valid field paths (optional)<br><em>@param</em> <strong>callback</strong> {Function} - optional callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Returns a callback that handles a standard form submission for the field.<br>Expected form parts are:<br><code>field.paths.improve</code> in <code>req.body</code> - improves data via <code>.googleLookup()</code>.<br><code>field.paths.overwrite</code> in <code>req.body</code> - in conjunction with <code>improve</code>, overwrites existing data.   </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/location/LocationType.js#L296-L333">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Location.handleRequest( item, req [, paths, callback ] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>req</strong> {Object} - valid file object<br><em>@param</em> <strong>paths</strong> {Object} - valid field paths (optional)<br><em>@param</em> <strong>callback</strong> {Function} - optional callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Immediately handles a standard form submission for the field (see <code>.Field.Types.Location.getRequestHandler()</code>).  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/location/LocationType.js#L336-L344"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre></p>
<hr>
<p><span class="subMethod"> .Field.Types.Location.googleLookup( item, region [, update ], callback )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object}<br><em>@param</em> <strong>region</strong> {String}<br><em>@param</em> <strong>update</strong> {Boolean|String} -  (optional)<br><em>@param</em> <strong>callback</strong> {Function}<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Autodetect the full address and lat, lng from the stored value.<br>Internal status codes mimic the Google API status codes.</p>
<p class="caution-note">Uses Google&#39;s Maps API and may only be used in conjunction with a Google map.<br>Geocoding results without displaying them on a map is prohibited.<br>Please make sure your Keystone app complies with the Google Maps API License. </p>


<p><div class="code-header addGitHubLink" data-file="fields/types/location/LocationType.js#L336-L344"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre></p>
<hr>
<p><span class="subMethod"> .Field.Types.Location.kmFrom( item, point )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>point</strong> {Number}<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Returns the distance from a [lat, lng] point in kilometres.   </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/location/LocationType.js#L529-L537"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre></p>
<hr>
<p><span class="subMethod"> .Field.Types.Location.milesFrom( item, point )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>point</strong> {Number}<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Returns the distance from a [lat, lng] point in miles.   </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/location/LocationType.js#L540-L548"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre></p>
<hr><a name="fieldTypes-Markdown"></a><h4 id="-field-types-markdown-list-path-options-">.Field.Types.Markdown( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._defaultSize = &#39;full&#39;;</p>
<p>// TODO: implement filtering, usage disabled for now
options.nofilter = true;</p>
<p>this.toolbarOptions = options.toolbarOptions || {};
this.height = options.height || 90;</p>
<p>// since wysiwyg option can be falsey this needs to use <code>in</code> instead of ||
this.wysiwyg = (&#39;wysiwyg&#39; in options) ? options.wysiwyg : true;</p>
<p>this._properties = [&#39;wysiwyg&#39;, &#39;height&#39;, &#39;toolbarOptions&#39;];</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/markdown/MarkdownType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Markdown.addToSchema(  ) </span>      </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Registers the field on the List&#39;s Mongoose Schema.    </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/markdown/MarkdownType.js#L41-L82"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Markdown.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.</p>
<pre><code class="lang-javascript">return item.get(this.paths.html);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/markdown/MarkdownType.js#L85-L93"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Markdown.isModified( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Detects whether the field has been modified.  </p>
<pre><code class="lang-javascript">// Assume that it has changed if the url is different
return item.isModified(this.paths.md);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/markdown/MarkdownType.js#L112-L120">&nbsp; </div><pre class=" language-javascript hideCode api"></pre></p>
<hr>
<p><span class="subMethod"> .Field.Types.Markdown.validateInput( data [, required, item ] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@param</em> <strong>required</strong> {Boolean} - true if this is a required field<br><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Validates that a value for this field has been provided in a data object.<br>Will accept either the field path, or paths.md.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/markdown/MarkdownType.js#L96-L109"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Markdown.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object.<br>Will accept either the field path, or paths.md </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/markdown/MarkdownType.js#L123-L138"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Money"></a><h4 id="-field-types-money-list-path-options-">.Field.Types.Money( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this.currency = options.currency;
this._nativeType = Number;
this._underscoreMethods = [&#39;format&#39;];
this._properties = [&#39;currency&#39;];
this._fixedSize = &#39;small&#39;;
this._formatString = (options.format === false) ? false : (options.format || &#39;$0,0.00&#39;);</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/money/MoneyType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Money.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/money/MoneyType.js#L29-L46">&nbsp; </div><pre class=" language-javascript hideCode api"></pre></p>
<hr>
<p><span class="subMethod"> .Field.Types.Money.validateInput( data [, required, item ] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@param</em> <strong>required</strong> {Boolean} - true if this is a required field<br><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Validates that a value for this field has been provided in a data object.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/money/MoneyType.js#L27"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Money.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object.   </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/money/MoneyType.js#L26"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Name"></a><h4 id="-field-types-name-list-path-options-">.Field.Types.Name( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">
this._fixedSize = &#39;large&#39;;
options.nofilter = true; // TODO: added in 0.4
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/name/NameType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.Name.addToSchema(  ) </span>  </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Registers the field on the List&#39;s Mongoose Schema.<br>Adds String properties for .first and .last name, and a virtual with get() and set() methods for .full  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/name/NameType.js#L18-L57"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Name.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/name/NameType.js#L59-L65"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Name.isModified( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Detects whether the field has been modified.  </p>
<pre><code class="lang-javascript">return item.isModified(this.paths.first) || item.isModified(this.paths.last);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/name/NameType.js#L84-L91">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Name.validateInput( data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Validates that a value for this field has been provided in a data object.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/name/NameType.js#L67-L82"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Name.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/name/NameType.js#L93-L124"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Number"></a><h4 id="-field-types-number-list-path-options-">.Field.Types.Number( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = Number;
this._fixedSize = &#39;small&#39;;
this._underscoreMethods = [&#39;format&#39;];
this._formatString = (options.format === false) ? false : (options.format || &#39;0,0[.][000000000000]&#39;);</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/number/NumberType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.Number.addFilterToQuery( filter, query ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>filter</strong> {Object} - valid filter object<br><em>@param</em> <strong>query</strong> {Object} - valid query object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Adds filters to a query.   </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/number/NumberType.js#L23-L56"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Number.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/number/NumberType.js#L32-L51"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Number.validateInput( data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Checks that a valid array of number has been provided in a data object.<br>An empty value clears the stored value and is considered valid.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/number/NumberType.js#L69-L84"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Number.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/number/NumberType.js#L86-L102"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-NumberArray"></a><h4 id="-field-types-numberarray-list-path-options-">.Field.Types.NumberArray( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = [Number];
this._underscoreMethods = [&#39;format&#39;];
this._formatString = (options.format === false) ? false : (options.format || &#39;0,0[.][000000000000]&#39;);
this._fixedSize = &#39;small&#39;;</p>
<p></code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/numberarray/NumberArrayType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.NumberArray.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/numberarray/NumberArrayType.js#L32-L51"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.NumberArray.validateInput( data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Checks that a valid array of number has been provided in a data object.<br>An empty value clears the stored value and is considered valid.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/numberarray/NumberArrayType.js#L63-L101"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.NumberArray.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/numberarray/NumberArrayType.js#L103-L138"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Password"></a><h4 id="-field-types-password-list-path-options-">.Field.Types.Password( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = String;
this._underscoreMethods = [&#39;format&#39;, &#39;compare&#39;];
this._fixedSize = &#39;large&#39;;
// You can&#39;t sort on password fields
options.nosort = true;
options.nofilter = true; // TODO: remove this when 0.4 is merged
this.workFactor = options.workFactor || 10;</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/password/PasswordType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.Password.addToSchema(  ) </span>  </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Registers the field on the List&#39;s Mongoose Schema.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/password/PasswordType.js#L23-L77"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Password.addFilterToQuery( filter, query )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>filter</strong> {Object} - valid filter object<br><em>@param</em> <strong>query</strong> {Object} - valid query object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Add filters to a query.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/password/PasswordType.js#L79-L86"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Password.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p class="note"> Password fields are always formatted as a random no. of asterisks, because the saved hash should never be displayed nor the length of the actual password hinted at.</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/password/PasswordType.js#L88-L103"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Password.isModified( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Detects whether the field has been modified.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/password/PasswordType.js#L169-L185">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Password.validateInput( data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Validates that a value for this field has been provided in a data object.<br><code>options.required</code> specifies an Array or space-delimited list of paths that are required (defaults to street1, suburb).  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/password/PasswordType.js#L188-L230"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Password.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object.</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/password/PasswordType.js#L233-L293"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Relationship"></a><h4 id="-field-types-relationship-list-path-options-">.Field.Types.Relationship( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this.many = (options.many) ? true : false;
this.filters = options.filters;
this._defaultSize = &#39;full&#39;;
this._nativeType = keystone.mongoose.Schema.Types.ObjectId;
this._underscoreMethods = [&#39;format&#39;];
this._properties = [&#39;isValid&#39;, &#39;many&#39;, &#39;filters&#39;, &#39;createInline&#39;];</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/relationship/RelationshipType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.Relationship.addFilterToQuery( filter, query )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>filter</strong> {Object} - valid filter object<br><em>@param</em> <strong>query</strong> {Object} - valid query object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Add filters to a query.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/relationship/RelationshipType.js#L98-L117"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Relationship.addFilters( query, item ) </span>   </p>
<blockquote>
<p><em>@param</em> <strong>query</strong> {Object} - valid query object<br><em>@param</em> <strong>item</strong> {Object} - list item<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Adds relationship filters to a query </p>
<p class="caution-note">TODO: Deprecate this? Not sure it&#39;s used anywhere </p>

<p><div class="code-header addGitHubLink" data-file="fields/types/relationship/RelationshipType.js#L203-L223">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Relationship.addToSchema(  ) </span>  </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Registers the field on the List&#39;s Mongoose Schema.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/relationship/RelationshipType.js#L63-L96"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Relationship.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>force the formatted value to be a string</p>
<p class="caution-note">unexpected things happen with ObjectIds.</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/relationship/RelationshipType.js#L119-L126"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Relationship.hasFilters </span>   </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Whether the field has any filters defined </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/relationship/RelationshipType.js#L194-L201">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Relationship.isValid </span>   </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Returns true if the relationship configuration is valid  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/relationship/RelationshipType.js#L176-L183">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Relationship.refList </span>   </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Returns the Related List </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/relationship/RelationshipType.js#L185-L192">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Relationship.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object.<br>Only updates the value if it has changed.<br>Treats an empty string as a null value.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/relationship/RelationshipType.js#L141-L174"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Relationship.validateInput( data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Validates that a value for this field has been provided in a data object  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/relationship/RelationshipType.js#L128-L139"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-S3File"></a><h4 id="-field-types-s3file-list-path-options-">.Field.Types.S3File( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">grappling.mixin(this)
    .allowHooks(&#39;pre:upload&#39;);
this._underscoreMethods = [&#39;format&#39;, &#39;uploadFile&#39;];
this._fixedSize = &#39;full&#39;;</p>
<p>// TODO: implement filtering, usage disabled for now
options.nofilter = true;</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/s3file/S3FileType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.S3File.s3config   </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Exposes the custom or keystone azure config settings.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/s3file/S3FileType.js#L67-L75">&nbsp; </div><pre class=" language-javascript hideCode api"></pre>  </p>
<hr>
<p><span class="subMethod"> .Field.Types.S3File.addToSchema(  ) </span>  </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Registers the field on the List&#39;s Mongoose Schema.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/s3file/S3FileType.js#L78-L173"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.S3File.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.</p>
<pre><code class="lang-javascript">return item.get(this.paths.url);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/s3file/S3FileType.js#L176-L184"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.S3File.hasFormatter(  ) </span> </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Detects the field have formatter function.  </p>
<pre><code class="lang-javascript">return &#39;function&#39; === typeof this.options.format;
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/s3file/S3FileType.js#L178-L186">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.S3File.generateHeaders( item, file, callback )  </span>   </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - list item<br><em>@param</em> <strong>file</strong> {Object} - the uploaded file<br><em>@param</em> <strong>callback</strong> {Function} - callback<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Generates a headers object for this item to use during upload.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/s3file/S3FileType.js#L223-L361"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.S3File.isModified( item ) </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Detects whether the field has been modified.  </p>
<pre><code class="lang-javascript">return item.isModified(this.paths.url);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="fields/types/s3file/S3FileType.js#L187-L195">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.S3File.validateInput( data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid data object<br><em>@api</em> <strong>public</strong>   </p>
</blockquote>
<p>Validates that a value for this field has been provided in a data object </p>
<p class="warning-note"> TODO - will only return true</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/s3file/S3FileType.js#L198-L207"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.S3File.updateItem( item, data )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>data</strong> {Object} - data to update<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Updates the value for this field in the item from a data object</p>
<p class="warning-note"> TODO - will not return</p>

<p><div class="code-header addGitHubLink" data-file="fields/types/s3file/S3FileType.js#L210-L218"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.S3File.uploadFile( item, file, update [, callback] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>file</strong> {Object} - valid file object<br><em>@param</em> <strong>update</strong> {Boolean} - update or not<br><em>@param</em> <strong>callback</strong> {Function} - callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Uploads the file for this field.</p>
<p><div class="code-header addGitHubLink" data-file="fields/types/s3file/S3FileType.js#L221-L277"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.S3File.getRequestHandler( item, req [, paths, callback] )  </span></p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>req</strong> {Object} - express req object<br><em>@param</em> <strong>paths</strong> {Object} - valid field paths (optional)<br><em>@param</em> <strong>callback</strong> {Function} - optional callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Returns a callback that handles a standard form submission for the field.<br>Expected form parts are:<br><code>field.paths.action</code> in <code>req.body</code> (<code>clear</code> or <code>delete</code>)<br><code>field.paths.upload</code> in <code>req.files</code> (uploads the file to s3file)  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/s3file/S3FileType.js#L280-L320">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.S3File.handleRequest( item, req [, paths, callback] )  </span> </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>req</strong> {Object} - express req object<br><em>@param</em> <strong>paths</strong> {Object} - valid field paths (optional)<br><em>@param</em> <strong>callback</strong> {Function} - optional callback (optional)<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Immediately handles a standard form submission for the field (see <code>.Field.Types.S3File.getRequestHandler()</code>).  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/s3file/S3FileType.js#L323-L331"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Select"></a><h4 id="-field-types-select-list-path-options-">.Field.Types.Select( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this.ui = options.ui || &#39;select&#39;;
this.numeric = options.numeric ? true : false;
this._nativeType = (options.numeric) ? Number : String;
this._underscoreMethods = [&#39;format&#39;];
this.<em>properties = [&#39;ops&#39;, &#39;numeric&#39;];
if (typeof options.options === &#39;string&#39;) {
    options.options = options.options.split(&#39;,&#39;);
}
if (!Array.isArray(options.options)) {
    throw new Error(&#39;Select fields require an options array.&#39;);
}
this.ops = options.options.map(function(i) {
    var op = </em>.isString(i) ? { value: i.trim(), label: utils.keyToLabel(i) } : i;
    if (!<em>.isObject(op)) {
        op = { label: &#39;&#39; + i, value: &#39;&#39; + i };
    }
    if (options.numeric &amp;&amp; !</em>.isNumber(op.value)) {
        op.value = Number(op.value);
    }
    return op;
});
// undefined options.emptyOption defaults to true
if (options.emptyOption === undefined) {
    options.emptyOption = true;
}
// ensure this.emptyOption is a boolean
this.emptyOption = options.emptyOption ? true : false;
// cached maps for options, labels and values
this.map = utils.optionsMap(this.ops);
this.labels = utils.optionsMap(this.ops, &#39;label&#39;);
this.values = _.pluck(this.ops, &#39;value&#39;);</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/select/SelectType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Select.addFilterToQuery( filter, query ) </span>   </p>
<blockquote>
<p><em>@param</em> <strong>filter</strong> {Object}<br><em>@param</em> <strong>query</strong> {Object}<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p>Add filters to a query.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/select/SelectType.js#L103-L114">&nbsp; </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Select.addToSchema(  ) </span>  </p>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Registers the field on the List&#39;s Mongoose Schema.  </p>
<p>Adds a virtual for accessing the label of the selected value, and statics to the Schema for converting a value to a label, and retrieving all of the defined options.   </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/select/SelectType.js#L47-L87"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Select.cloneOps(  ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p><div class="code-header"> <h4>Retrieves a shallow clone of the options arrays</h4></div><pre class=" language-javascript"><code class="language-javascript"> return <em>.map(this.ops, </em>.clone); </code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/select/SelectType.js#L89-L94"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Select.cloneMap(  ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p><div class="code-header"> <h4>Retrieves a shallow clone of the options map.</h4></div><pre class=" language-javascript"><code class="language-javascript"> return utils.optionsMap(this.ops, true); </code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/select/SelectType.js#L96-L101"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Select.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/select/SelectType.js#L127-L132"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Select.validateInput( data [, required, item ] ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object}<br><em>@param</em> <strong>required</strong> {Boolean} 
<em>@param</em> <strong>item</strong> {Object}<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Validates that a valid option has been provided in a data object.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/select/SelectType.js#L116-L125"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Text"></a><h4 id="-field-types-text-list-path-options-">.Field.Types.Text( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = String;
this._underscoreMethods = [&#39;crop&#39;];</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/text/TextType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.Text.addFilterToQuery( filter, query ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>filter</strong> {Object} - valid filter object<br><em>@param</em> <strong>query</strong> {Object} - valid query object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Adds filters to a query.   </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/text/TextType.js#L17-L37"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Text.crop( item, length, append, preserveWords ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>length</strong> {Number} - length to crop to<br><em>@param</em> <strong>append</strong> {String} - string to append<br><em>@param</em> <strong>preserveWords</strong> {Boolean} - whether to preserve the last word in full<br><em>@return</em> {String} - cropped string<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Crops the string to the specifed length.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/text/TextType.js#L39-L44"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-TextArray"></a><h4 id="-field-types-textarray-list-path-options-">.Field.Types.TextArray( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = [String];
this._underscoreMethods = [&#39;crop&#39;];</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/textarray/TextArrayType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre>  </p>
<p><span class="subMethod"> .Field.Types.TextArray.validateInput( data [, required, item ]) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - valid filter object<br><em>@param</em> <strong>required</strong> {Boolean} - required or not<br><em>@param</em> <strong>item</strong> {Object} - valid query object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Validates that a value for this field has been provided in a data object   </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/textarray/TextArrayType.js#L26-L47"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.TextArray.updateItem( item, data ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid item object<br><em>@param</em> <strong>data</strong> {Object}<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Updates the value for this field in the item from a data object.    </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/textarray/TextArrayType.js#L49-L72"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Textarea"></a><h4 id="-field-types-textarea-list-path-options-">.Field.Types.Textarea( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = String;
this._underscoreMethods = [&#39;format&#39;, &#39;crop&#39;];
this.height = options.height || 90;
this._properties = [&#39;height&#39;];</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/textarea/TextareaType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.Textarea.addFilterToQuery( filter, query ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>filter</strong> {Object} - valid filter object<br><em>@param</em> <strong>query</strong> {Object} - valid query object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Adds filters to a query.   </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/textarea/TextareaType.js#L21"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Textarea.crop( item, length, append, preserveWords ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@param</em> <strong>length</strong> {Number} - length to crop to<br><em>@param</em> <strong>append</strong> {String} - string to append<br><em>@param</em> <strong>preserveWords</strong> {Boolean} - whether to preserve the last word in full<br><em>@return</em> {String} - cropped string<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Crops the string to the specifed length.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/textarea/TextareaType.js#L22"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Textarea.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/textarea/TextareaType.js#L24-L30"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="fieldTypes-Url"></a><h4 id="-field-types-url-list-path-options-">.Field.Types.Url( list, path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>list</strong> <em>{Object}</em>  - valid Keystone list<br><em>@param</em> <strong>path</strong> <em>{String}</em>  - path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - options<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header"> <h4>defaults</h4></div><pre class=" language-javascript"><code class="language-javascript">this._nativeType = String;
this._underscoreMethods = [&#39;format&#39;];
this._formatUrl = options.format || removeProtocolPrefix;</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="fields/types/url/UrlType.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<p><span class="subMethod"> .Field.Types.Url.addFilterToQuery( filter, query ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>filter</strong> {Object} - valid filter object<br><em>@param</em> <strong>query</strong> {Object} - valid query object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Adds filters to a query.   </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/url/UrlType.js#L18-L19"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Url.format( item ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>item</strong> {Object} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Formats the field value using either a supplied format function or default.<br>Strips the leading protocol from the value for simpler display.  </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/url/UrlType.js#L21-L28"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr>
<p><span class="subMethod"> .Field.Types.Url.removeProtocolPrefix( url ) </span>  </p>
<blockquote>
<p><em>@param</em> <strong>url</strong> {String} - valid field object<br><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p>Remove the protocol prefix from url.   </p>
<p><div class="code-header addGitHubLink" data-file="fields/types/url/UrlType.js#L30-L35"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="main-list"></a><h3>.List Class</h3><h4 id="new-keystone-list-key-options-">new Keystone.List( key, options )</h4>
<blockquote>
<p><em>@param</em> <strong>key</strong> <em>{String}</em>  - List name<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - Object of valid options<br><em>@return</em> <strong>Instance</strong>   </p>
</blockquote>
<p>Create a new Keystone List.<br>Each list is a wrapper around a mongoose collection schema and includes Keystone specific enhancements.<br>The mongoose schema is available via <code>list.schema</code>.  </p>
<p><div class="code-header"> <h4>Create a new list</h4></div><pre class=" language-javascript"><code class="language-javascript">  </p>
<pre><code>    var keystone = require(&#39;keystone&#39;);
    var Types = keystone.Field.Types;

    var Post = new keystone.List(&#39;Post&#39;, {
        autokey: { path: &#39;slug&#39;, from: &#39;title&#39;, unique: true },
        map: { name: &#39;title&#39; },
        defaultSort: &#39;-createdAt&#39;
    });

    Post.add({
        title: { type: String, required: true },
        state: { type: Types.Select, options: &#39;draft, published, archived&#39;, default: &#39;draft&#39; },
        author: { type: Types.Relationship, ref: &#39;User&#39; },
        createdAt: { type: Date, default: Date.now },
        publishedAt: Date,
        image: { type: Types.CloudinaryImage },
        content: {
            brief: { type: Types.Html, wysiwyg: true, height: 150 },
            extended: { type: Types.Html, wysiwyg: true, height: 400 }
        }
    });

    Post.defaultColumns = &#39;title, state|20%, author, publishedAt|15%&#39;;
    Post.register();
</code></pre><p></code></pre>  </p>
<p><div class="code-header"> <h4>Default options </h4></div><pre class=" language-javascript"><code class="language-javascript">
    var defaultOptions = {
        schema: {
            collection: keystone.prefixModel(key)
        },
        noedit: false,
        nocreate: false,
        nodelete: false,
        autocreate: false,
        sortable: false,
        hidden: false,
        track: false,
        inherits: false,
        searchFields: &#39;<strong>name</strong>&#39;,
        defaultSort: &#39;<strong>default</strong>&#39;,
        defaultColumns: &#39;<strong>name</strong>&#39;
    };</p>
<p></code></pre>  </p>
<p><div class="code-header"> <h4>List properties </h4></div><pre class=" language-javascript"><code class="language-javascript">
    this.key = key;
    this.path = this.get(&#39;path&#39;) || utils.keyToPath(key, true);
    this.schema = new keystone.mongoose.Schema({}, this.options.schema);
    this.schemaFields = [];
    this.uiElements = [];
    this.underscoreMethods = {};
    this.fields = {};
    this.fieldsArray = [];
    this.fieldTypes = {};
    this.relationshipFields = [];
    this.relationships = {};
    this.mappings = {
        name: null,
        createdBy: null,
        createdOn: null,
        modifiedBy: null,
        modifiedOn: null
    };</p>
<p></code></pre>  </p>
<p><div class="code-header addGitHubLink" data-file="lib/list.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-add"></a><h4 id="list-add-fields-">List.add( fields )</h4>
<blockquote>
<p><em>@param</em> <strong>fields</strong> <em>{Object}</em>  - Object of valid Keystone/Mongoose document fields<br><em>@return</em> <strong>this</strong> </p>
</blockquote>
<p>Adds one or more fields to the List<br>Based on Mongoose&#39;s <code>Schema.add</code> </p>
<pre><code class="lang-javascript">Post.add({
    title: { type: String, required: true },
    state: { type: Types.Select, options: &#39;draft, published, archived&#39;, default: &#39;draft&#39; },
    author: { type: Types.Relationship, ref: &#39;User&#39; },
    createdAt: { type: Date, default: Date.now },
    publishedAt: Date,
    image: { type: Types.CloudinaryImage },
    content: {
        brief: { type: Types.Html, wysiwyg: true, height: 150 },
        extended: { type: Types.Html, wysiwyg: true, height: 400 }
    }
});
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/list/add.js"> <a href="#" class="loadCode">code</a> </div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-addFiltersToQuery"></a><h4 id="list-addfilterstoquery-filters-query-">List.addFiltersToQuery( filters, query )</h4>
<blockquote>
<p><em>@param</em> <strong>filters</strong> <em>{Array}</em>  - Filters to add to query<br><em>@param</em> <strong>query</strong> <em>{Object}</em>  - Query object<br><em>@return</em> <strong>this</strong> </p>
</blockquote>
<p>Adds one or more filters to a list query in the AdminUI</p>
<p><div class="code-header addGitHubLink" data-file="lib/list/addFiltersToQuery.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-addSearchToQuery"></a><h4 id="list-addsearchtoquery-searchstring-query-">List.addSearchToQuery( searchString, query )</h4>
<blockquote>
<p><em>@param</em> <strong>searchString</strong> <em>{String}</em>  - Search string<br><em>@param</em> <strong>query</strong> <em>{Object}</em>  - Query object<br><em>@return</em> <strong>this</strong>   </p>
</blockquote>
<p>Adds a search string to a list query in the AdminUI</p>
<p><div class="code-header addGitHubLink" data-file="lib/list/addSearchToQuery.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-automap"></a><h4 id="list-automap-field-">List.automap ( field )</h4>
<blockquote>
<p><em>@param</em> <strong>field</strong> <em>{Object}</em>  - valid field object<br><em>@return</em> <strong>this</strong>   </p>
</blockquote>
<p>Checks to see if a field path matches a currently unmapped path, and
if so, adds a mapping for it.</p>
<p><div class="code-header addGitHubLink" data-file="lib/list/automap.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-expandColumns"></a><h4 id="list-expandcolumns-cols-">List.expandColumns( cols )</h4>
<blockquote>
<p><em>@param</em> <strong>field</strong> <em>{Object}</em>  - valid field object<br><em>@return</em> <strong>this</strong>   </p>
</blockquote>
<p>Expands a comma-separated string or array of columns into valid column objects.  </p>
<p>Columns can be:  </p>
<ul>
<li>A Field, in the format <code>field|width</code> </li>
<li>A Field in a single related List, in the format <code>list:field|width</code>  </li>
<li>Any valid path in the Schema, in the format <code>path|width</code>  </li>
</ul>
<p>The width part is optional, and can be in the format <code>n%</code> or <code>npx</code>.</p>
<p>The path <code>__name__</code> is automatically mapped to the namePath of the List.  </p>
<p>The field or path for the name of the item (defaults to ID if not set or detected) is automatically prepended if not explicitly included.  </p>
<p><div class="code-header addGitHubLink" data-file="lib/list/expandColumns.js"> <a href="#" class="loadCode">code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-expandPaths"></a><h4 id="list-expandpaths-paths-">List.expandPaths( paths )</h4>
<blockquote>
<p><em>@param</em> <strong>paths</strong> <em>{String}</em>  - field paths<br><em>@return</em> <strong>Object</strong>   </p>
</blockquote>
<p>Expand a String of field paths into objects</p>
<p><div class="code-header addGitHubLink" data-file="lib/list/expandPaths.js"><a href="#" class="loadCode">code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-expandSort"></a><h4 id="list-expandsort-input-">List.expandSort( input )</h4>
<blockquote>
<p><em>@param</em> <strong>paths</strong> <em>{String}</em><br><em>@return</em> <strong>Object</strong>   </p>
</blockquote>
<p><div class="code-header addGitHubLink" data-file="lib/list/expandSort.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-field"></a><h4 id="list-field-path-options-">List.field( path, options )</h4>
<blockquote>
<p><em>@param</em> <strong>path</strong> <em>{String}</em> - new field path<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - field options<br><em>@return</em> <strong>Object</strong>    </p>
</blockquote>
<p>Creates a new field at the specified path, with the provided options.<br>If no options are provides, returns the field at the specified path.  </p>
<p><div class="code-header addGitHubLink" data-file="lib/list/field.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-getAdminURL"></a><h4 id="list-getadminurl-item-">List.getAdminURL( item )</h4>
<blockquote>
<p><em>@param</em> <strong>item</strong> <em>{String}</em> - item<br><em>@return</em> <strong>String</strong>    </p>
</blockquote>
<p>Gets the Admin URL to view the list (or an item if provided)  </p>
<pre><code class="lang-javascript">    var listURL = list.getAdminURL()
    var itemURL = list.getAdminURL(item)
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/list/getAdminURL.js"><a href="#" class="loadCode">code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-getCSV"></a><h4 id="list-getcsv-item-fields-expandrelationshipfields-">List.getCSV ( item, [fields, expandRelationshipFields] )</h4>
<blockquote>
<p><em>@param</em> <strong>item</strong> <em>{Object}</em> - list item<br><em>@param</em> <strong>fields</strong> <em>{Object}</em><br><em>@param</em> <strong>expandRelationshipFields</strong> <em>{Boolean}</em><br><em>@return</em> <strong>String</strong>    </p>
</blockquote>
<p>Gets the data from an Item ready to be serialised to CSV for download</p>
<p><div class="code-header addGitHubLink" data-file="lib/list/getCSV.js"><a href="#" class="loadCode">code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-getData"></a><h4 id="list-getdata-item-fields-expandrelationshipfields-">List.getData ( item, [fields, expandRelationshipFields] )</h4>
<blockquote>
<p><em>@param</em> <strong>item</strong> <em>{Object}</em> - list item<br><em>@param</em> <strong>fields</strong> <em>{Object}</em><br><em>@param</em> <strong>expandRelationshipFields</strong> <em>{Boolean}</em><br><em>@return</em> <strong>String</strong>    </p>
</blockquote>
<p>Gets the data from an Item ready to be serialised for client-side use, as used by the React components  </p>
<p><div class="code-header addGitHubLink" data-file="lib/list/getData.js"><a href="#" class="loadCode">code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-getDocumentName"></a><h4 id="-getdocumentname-doc-escape-">.getDocumentName( doc, escape )</h4>
<blockquote>
<p><em>@param</em> <strong>doc</strong> <em>{Object}</em> - mongoose document<br><em>@param</em> <strong>escape</strong> <em>{Boolean}</em><br><em>@return</em> <strong>String</strong>    </p>
</blockquote>
<p>Gets the name of the provided document from the correct path  </p>
<pre><code class="lang-javascript">var name = list.getDocumentName(item)
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/list/getDocumentName.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-getOptions"></a><h4 id="list-getoptions-">List.getOptions( )</h4>
<blockquote>
<p><em>@return</em> <strong>Object</strong>    </p>
</blockquote>
<p>Gets the options for the List, as used by the React components</p>
<p><div class="code-header addGitHubLink" data-file="lib/list/getOptions.js"><a href="#" class="loadCode">code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-getPages"></a><h4 id="-getpages-options-maxpages-">.getPages( options, maxPages )</h4>
<blockquote>
<p>@param <strong>options</strong> {Object} - page options<br>@param <strong>maxPages</strong> {Number} - the maximum number pages to display in the pagination<br><em>@return</em> <strong>Object</strong>  - options  </p>
</blockquote>
<p>Generate page array for pagination  </p>
<p><div class="code-header addGitHubLink" data-file="lib/list/getPages.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-getUniqueValue"></a><h4 id="list-getuniquevalue-path-generator-_limit_-callback-">List.getUniqueValue( path, generator [, <em>limit</em> ], callback )</h4>
<blockquote>
<p><em>@param</em> <strong>path</strong> {String} - path to check for uniqueness<br><em>@param</em> <strong>generator</strong> {Function} - generator method to call to generate a new value<br><em>@param</em> <strong>limit</strong> {Number} - the maximum number of attempts (optional, defaults to 10)<br><em>@param</em> <strong>callback</strong> {Function} - callback(err, uniqueValue)  </p>
</blockquote>
<p>Gets a unique value from a generator method by checking for documents with the same value.  </p>
<p>To avoid infinite loops when a unique value cannot be found, it will bail and pass back an undefined value after 10 attempts.  </p>
<p class="warning-note">Because there will always be a small amount of time between checking for an existing value and saving a document, race conditions can occur and it is possible that another document has the &#39;unique&#39; value assigned at the same time. <br /> <br /> If true uniqueness is required, you should also create a unique index on the database path, and handle duplicate errors thrown on save. </p>  




<p><div class="code-header addGitHubLink" data-file="lib/list/getUniqueValue.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-isReserved"></a><h4 id="list-isreserved-path-">List.isReserved( path )</h4>
<blockquote>
<p><em>@param</em> <strong>path</strong> {String} - path to check<br><em>@return</em> <strong>Boolean</strong></p>
</blockquote>
<p>Check whether or not a <code>path</code> is a reserved path. This restricts the use of <code>Object.prototype</code> method keys as well as internal mongo paths.  </p>
<p><div class="code-header"> <h4>Reserved Paths</h4></div><pre class=" language-javascript"><code class="language-javascript">
    [
        &#39;id&#39;,
        &#39;_id&#39;,
        &#39;_&#39;,
        &#39;prototype&#39;,
        &#39;__proto__&#39;,
        &#39;hasOwnProperty&#39;,
        &#39;toString&#39;,
        &#39;__defineGetter__&#39;,
        &#39;__defineSetter__&#39;,
        &#39;__lookupGetter__&#39;,
        &#39;__lookupSetter__&#39;,
        &#39;isPrototypeOf&#39;,
        &#39;propertyIsEnumerable&#39;,
        &#39;toLocaleString&#39;,
        &#39;valueOf&#39;
    ];
</code></pre>  </p>
<p><div class="code-header addGitHubLink" data-file="lib/list/isReserved.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-map"></a><h4 id="list-map-field-path-">List.map( field, path )</h4>
<blockquote>
<p><em>@param</em> <strong>field</strong> {String} - map to<br><em>@param</em> <strong>path</strong> {String} - map this<br><em>@return</em> <strong>Object</strong>  </p>
</blockquote>
<p>Maps a built-in field (e.g. name) to a specific path or returns field mapping  </p>
<p><div class="code-header addGitHubLink" data-file="lib/list/map.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-paginate"></a><h4 id="list-paginate-options-_callback_-">List.paginate( options  [, <em>callback</em> ] )</h4>
<blockquote>
<p><em>@param</em> <strong>options</strong> {Object} - options<br><em>@param</em> <strong>callback</strong> {Function} - callback<br><em>@return</em> <strong>chain</strong> - exec</p>
</blockquote>
<p>Gets a special Query object that will paginate documents in the list.  </p>
<pre><code class="lang-javascript">list.paginate({
    page: 1,
    perPage: 100,
    maxPages: 10
}).exec(function(err, results) {
    // do something
});
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/list/paginate.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-register"></a><h4 id="list-register-">List.register(  )</h4>
<blockquote>
<p><em>@return</em> <strong>this</strong>    </p>
</blockquote>
<p>Registers the Schema with Mongoose, and the List with Keystone.  </p>
<p>Also adds default fields and virtuals to the schema for the list.  </p>
<p><div class="code-header addGitHubLink" data-file="lib/list/register.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-relationship"></a><h4 id="list-relationship-def-">List.relationship( ...def )</h4>
<blockquote>
<p><em>@param</em> <strong>def</strong> {...String|Option} - relationship (multiple arguments allowed)<br><em>@return</em> <strong>this</strong>     </p>
</blockquote>
<p>Registers relationships to this list defined on others  </p>
<p><div class="code-header addGitHubLink" data-file="lib/list/relationship.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-selectColumns"></a><h4 id="list-selectcolumns-q-cols-">List.selectColumns( q, cols )</h4>
<blockquote>
<p><em>@param</em> <strong>q</strong> {Query} - query<br><em>@param</em> <strong>cols</strong> {Array} - columns<br><em>@return</em> <strong>Query</strong> - q   </p>
</blockquote>
<p>Specified select and populate options for a query based the provided columns.  </p>
<p><div class="code-header addGitHubLink" data-file="lib/list/selectColumns.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-set"></a><h4 id="list-set-key-value-">List.set( key, value )</h4>
<blockquote>
<p><em>@param</em> <strong>key</strong> {String} - key name<br><em>@param</em> <strong>value</strong> {...String|Object|Array|Function} - value<br><em>@return</em> <strong>value</strong> - value  </p>
</blockquote>
<p>Gets and Sets list options. Aliased as <code>.get()</code>.  </p>
<pre><code class="lang-javascript">list.set(&#39;test&#39;) // returns the &#39;test&#39; value
list.set(&#39;test&#39;, value) // sets the &#39;test&#39; option to `value`
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/list/set.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-underscoreMethod"></a><h4 id="list-underscoremethod-path-fn-">List.underscoreMethod( path, fn )</h4>
<blockquote>
<p><em>@param</em> <strong>path</strong> {String} - path<br><em>@param</em> <strong>fn</strong> {Function} - underscore method<br><em>@return</em> <strong>this</strong>  </p>
</blockquote>
<p>Adds a method to the underscoreMethods collection on the list, which is then added to the schema before the list is registered with mongoose.  </p>
<p><div class="code-header addGitHubLink" data-file="lib/list/underscoreMethod.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="list-updateAll"></a><h4 id="list-updateall-data-_callback_-">List.updateAll( data [, <em>callback</em> ] )</h4>
<blockquote>
<p><em>@param</em> <strong>data</strong> {Object} - path<br><em>@param</em> <strong>callback</strong> {Function} - callback<br><em>@return</em> <strong>this</strong>  </p>
</blockquote>
<p>Updates every document in a List, setting the provided data on each.  </p>
<p><div class="code-header addGitHubLink" data-file="lib/list/updateAll.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="schema-&lt;i&gt;schemaPlugins&lt;/i&gt;.autokey"></a><h4 id="list-_schemaplugins_-autokey-">List <em>schemaPlugins</em>.autokey (  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p><div class="code-header"> </p>
<h4 id="adds-a-key-to-each-document-in-a-collection">Adds a key to each document in a collection</h4>
<p>Uses a current field, <code>from</code>, to create a key.<br>Creates a new field based on <code>path</code>.<br>Key will be unique if <code>unique</code> is <strong>boolean</strong> <code>true</code>.<br>Key will update anytime the <code>from</code> field updates unless <code>fixed</code> is <strong>boolean</strong> <code>true</code>.<br></div><pre class=" language-javascript"><code class="language-javascript">    autokey: { 
        path: &#39;slug&#39;, 
        from: &#39;name&#39;,
        unique: true,
        fixed: false
    }
</code></pre></p>
<p>Uses <code class="default-value"> list.schema.pre(&#39;save&#39;...) </code> to alter documents.</p>
<p><div class="code-header addGitHubLink" data-file="lib/schemaPlugins/autokey.js"><a href="#" class="loadCode">code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="schema-&lt;i&gt;schemaPlugins&lt;/i&gt;.history"></a><h4 id="list-_schemaplugins_-history-">List <em>schemaPlugins</em>.history (  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p><div class="code-header"> </p>
<h4 id="when-enabled-it-tracks-changes-to-each-document-on-save-or-remove-">When enabled, it tracks changes to each document on save or remove.</h4>
<p>Creates a new collection named <code>yourcollections_revisions</code> when <strong>boolean</strong> <code>true</code>.<br>Revisions are noted on all <code>Save</code> and <code>Remove</code> operations.<br></div><pre class=" language-javascript"><code class="language-javascript">    history: true</code></pre></p>
<p>Uses <code class="default-value"> list.schema.pre(&#39;save&#39;...) </code> and <code class="default-value"> list.schema.pre(&#39;remove&#39;...) </code>to alter documents.</p>
<p><div class="code-header addGitHubLink" data-file="lib/schemaPlugins/history.js"><a href="#" class="loadCode">code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="schema-&lt;i&gt;schemaPlugins&lt;/i&gt;.sortable"></a><h4 id="list-_schemaplugins_-sortable-">List <em>schemaPlugins</em>.sortable (  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p><div class="code-header"> </p>
<h4 id="drag-and-drop-sorting-in-adminui">Drag and Drop Sorting in AdminUI</h4>
<p>Adds a hidden field <code>sortOrder</code> to the schema.<br></div><pre class=" language-javascript"><code class="language-javascript">    sortable: true </code></pre></p>
<p>Uses <code class="default-value"> list.schema.pre(&#39;save&#39;...) </code>to alter documents.</p>
<p><div class="code-header addGitHubLink" data-file="lib/schemaPlugins/sortable.js"><a href="#" class="loadCode">code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="schema-&lt;i&gt;schemaPlugins&lt;/i&gt;.track"></a><h4 id="list-_schemaplugins_-track-">List <em>schemaPlugins</em>.track (  )</h4>
<blockquote>
<p><em>@api</em> <strong>private</strong>   </p>
</blockquote>
<p><div class="code-header"><h4>Adds tracking fields to a collection</h4></div><pre class=" language-javascript"><code class="language-javascript"> track: true </code></pre>  </p>
<p><div class="code-header"> <h4>Added fields</h4></div><pre class=" language-javascript"><code class="language-javascript">    { 
        createdAt: false, 
        createdBy: false,
        updatedAt: false,
        updatedBy: false
    };
</code></pre> </p>
<p>Uses <code class="default-value"> list.schema.pre(&#39;save&#39;...) </code> to alter documents.</p>
<p><div class="code-header addGitHubLink" data-file="lib/schemaPlugins/track.js"><a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="main-middleware"></a><h3>.middleware helper</h3><h4 id="keystone-middleware">Keystone.middleware</h4>
<p>Middleware helpers for sucurity and api functions</p>
<p><div class="code-header addGitHubLink" data-file="lib/middleware"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="middleware-api"></a><h4 id="-middleware-api">.middleware.api</h4>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p><div class="code-header"> <h4>Adds helper methods to the <code>res</code> object</h4></div><pre class=" language-javascript"><code class="language-javascript">res.apiResponse(data);</p>
<p>res.apiError(key, err, msg, code);  </p>
<p>res.apiNotFound(err, msg);  </p>
<p>res.apiNotAllowed(err, msg);</p>
<p></code></pre></p>
<p><div class="code-header"> <h4>Example</h4></div><pre class=" language-javascript"><code class="language-javascript">app.all(&#39;/api*&#39;, keystone.middleware.api);
app.get(&#39;/api/v2/posts&#39;, function( req, res ){
    // send back json data with included middleware
    ... // get data
    res.apiResponse(data); 
});
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="lib/middleware/api.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="middleware-cors"></a><h4 id="-middleware-cors">.middleware.cors</h4>
<blockquote>
<p><em>@api</em> <strong>public</strong>     </p>
</blockquote>
<p><div class="code-header"> <h4>Adds CORS headers to the response.</h4></div><pre class=" language-javascript"><code class="language-javascript"> app.all(&#39;/api*&#39;, keystone.middleware.cors);
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="lib/middleware/cors.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="main-security"></a><h3>.security.csrf helper</h3><h4 id="keystone-security-csrf">Keystone.security.csrf</h4>
<blockquote>
<p><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p>Helper to uilize csrf   </p>
<p><span class="subMethod"> .security.csrf.TOKEN_KEY </span>= <code>&#39;_csrf&#39;</code><br><span class="subMethod"> .security.csrf.LOCAL_KEY</span>  = <code>&#39;csrf_token_key&#39;</code><br><span class="subMethod"> .security.csrf.LOCAL_VALUE </span>= <code>&#39;csrf_token_value&#39;</code><br><span class="subMethod"> .security.csrf.SECRET_KEY </span>= <code>.TOKEN_KEY + &#39;_secret&#39;</code><br><span class="subMethod"> .security.csrf.SECRET_LENGTH </span>= <code>10</code><br><span class="subMethod"> .security.csrf.CSRF_HEADER_KEY</span>  = <code>&#39;x-csrf-token&#39;</code><br><span class="subMethod"> .security.csrf.XSRF_HEADER_KEY </span>= <code>&#39;x-xsrf-token&#39;</code><br><span class="subMethod"> .security.csrf.XSRF_COOKIE_KEY </span> = <code>&#39;XSRF-TOKEN&#39;</code>  </p>
<p><div class="code-header addGitHubLink" data-file="lib/security/csrf.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript  hideCode api"></pre> </p>
<hr><a name="security-createSecret"></a><h4 id="-security-csrf-createsecret-">.security.csrf.createSecret(  )</h4>
<blockquote>
<p><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header addGitHubLink" data-file="lib/security/csrf.js#L26-L28"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="security-getSecret"></a><h4 id="-security-csrf-getsecret-req-">.security.csrf.getSecret( req )</h4>
<blockquote>
<p><em>@param</em> <strong>req</strong> <em>{Object}</em>  - express request object<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header addGitHubLink" data-file="lib/security/csrf.js#L22-L24"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="security-getToken"></a><h4 id="-security-csrf-gettoken-req-res-">.security.csrf.getToken( req, res )</h4>
<blockquote>
<p><em>@param</em> <strong>req</strong> <em>{Object}</em>  - express request object<br><em>@param</em> <strong>res</strong> <em>{Object}</em>  - express response object<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header addGitHubLink" data-file="lib/security/csrf.js#L30-L34"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="security-middleware"></a><h4 id="-security-csrf-middleware-init-req-res-next-">.security.csrf.middleware.init( req, res, next )</h4>
<blockquote>
<p><em>@param</em> <strong>req</strong> <em>{Object}</em>  - express request object<br><em>@param</em> <strong>res</strong> <em>{Object}</em>  - express response object<br><em>@param</em> <strong>next</strong> <em>{Object}</em>  - callback<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header addGitHubLink" data-file="lib/security/csrf.js#L61-L65"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<h4 id="-security-csrf-middleware-validate-req-res-next-">.security.csrf.middleware.validate( req, res, next )</h4>
<blockquote>
<p><em>@param</em> <strong>req</strong> <em>{Object}</em>  - express request object<br><em>@param</em> <strong>res</strong> <em>{Object}</em>  - express response object<br><em>@param</em> <strong>next</strong> <em>{Object}</em>  - callback<br><em>@api</em> <strong>public</strong></p>
</blockquote>
<p><div class="code-header addGitHubLink" data-file="lib/security/csrf.js#L67-L82"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="security-requestToken"></a><h4 id="-security-csrf-requesttoken-req-">.security.csrf.requestToken( req )</h4>
<blockquote>
<p><em>@param</em> <strong>req</strong> <em>{Object}</em>  - express request object<br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header addGitHubLink" data-file="lib/security/csrf.js#L36-L47"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="security-tokenize"></a><h4 id="-security-csrf-tokenize-salt-secret-">.security.csrf.tokenize( salt, secret )</h4>
<blockquote>
<p><em>@param</em> <strong>salt</strong> <em>{String}</em><br><em>@param</em> <strong>secret</strong> <em>{String}</em><br><em>@api</em> <strong>public</strong>  </p>
</blockquote>
<p><div class="code-header addGitHubLink" data-file="lib/security/csrf.js#L14-L16"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="security-validate"></a><h4 id="-security-csrf-validate-req-token-">.security.csrf.validate( req, token )</h4>
<blockquote>
<p><em>@param</em> <strong>req</strong> <em>{Object}</em>  - express request object<br><em>@param</em> <strong>token</strong> <em>{String}</em>  - token<br><em>@api</em> <strong>public</strong>    </p>
</blockquote>
<p><div class="code-header addGitHubLink" data-file="lib/security/csrf.js#L49-L57"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre>  </p>
<hr><a name="main-session"></a><h3>.session helper</h3><h4 id="keystone-session">Keystone.session</h4>
<p>Helper to uilize sessions  </p>
<p><div class="code-header addGitHubLink" data-file="lib/session.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="session-keystoneAuth"></a><h4 id="-session-keystoneauth-req-res-next-">.session.keystoneAuth( req, res, next )</h4>
<blockquote>
<p><em>@param</em> <strong>req</strong> <em>{Object}</em>  - express request object<br><em>@param</em> <strong>res</strong> <em>{Object}</em>  - express response object<br><em>@param</em> <strong>next</strong> <em>{Object}</em>  - callback  </p>
</blockquote>
<p>Middleware to enable access to Keystone.</p>
<p>Bounces the user to the signin screen if they are not signed in or do not have permission.  </p>
<p><code>req.user</code> is the user returned by the database. It&#39;s type is Keystone.List.<br><code>req.user.canAccessKeystone</code> denotes whether the user has access to the admin panel.</p>
<p class="note">If you&#39;re having issues double check your user model. Setting <code>canAccessKeystone</code> to true in the database will not be reflected here if it is virtual. <br/> See <a href="http://mongoosejs.com/docs/guide.html#virtuals">http://mongoosejs.com/docs/guide.html#virtuals</a></p>


<p><div class="code-header addGitHubLink" data-file="lib/session.js#L190-L215"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="session-persist"></a><h4 id="-session-persist-req-res-next-">.session.persist( req, res, next )</h4>
<blockquote>
<p><em>@param</em> <strong>req</strong> <em>{Object}</em>  - express request object<br><em>@param</em> <strong>res</strong> <em>{Object}</em>  - express response object<br><em>@param</em> <strong>next</strong> <em>{Object}</em>  - callback  </p>
</blockquote>
<p>Middleware to ensure session persistence across server restarts.  </p>
<p>Looks for a userId cookie, and if present, and there is no user signed in, automatically signs the user in.</p>
<p><div class="code-header addGitHubLink" data-file="lib/session.js#L156-L188"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="session-signin"></a><h4 id="-session-signin-user-req-res-onsuccess-onfail-">.session.signin( user, req, res, onSuccess, onFail )</h4>
<blockquote>
<p><em>@param</em> <strong>user</strong> <em>{Object}</em>  - user object<br><em>@param</em> <strong>req</strong> <em>{Object}</em>  - express request object<br><em>@param</em> <strong>res</strong> <em>{Object}</em>  - express response object<br><em>@param</em> <strong>onSuccess</strong> <em>{Object}</em>  - onSuccess callback, is passed the User instance<br><em>@param</em> <strong>onFail</strong> <em>{Object}</em>  - onFail callback  </p>
</blockquote>
<p>Signs in a user user matching the lookup filters </p>
<p><div class="code-header"> <h4>Example</h4>From <a href="http://www.sydjs.com" target="_blank">sydjs.com</a> <a href="https://github.com/JedWatson/sydjs-site/blob/master/routes/views/session/signin.js" target="_blank">(code)</a></div><pre class=" language-javascript"><code class="language-javascript">
function(req, res) {</p>
<pre><code>if (req.user) {
    return res.redirect(req.cookies.target || &#39;/me&#39;);
}

var view = new keystone.View(req, res),
    locals = res.locals;

locals.section = &#39;session&#39;;
locals.form = req.body;

view.on(&#39;post&#39;, { action: &#39;signin&#39; }, function(next) {

    if (!req.body.email || !req.body.password) {
        req.flash(&#39;error&#39;, &#39;Please enter your username and password.&#39;);
        return next();
    }

    var onSuccess = function() {
        if (req.body.target &amp;&amp; !/join|signin/.test(req.body.target)) {
            console.log(&#39;[signin] - Set target as [&#39; + req.body.target + &#39;].&#39;);
            res.redirect(req.body.target);
        } else {
            res.redirect(&#39;/me&#39;);
        }
    }

    var onFail = function() {
        req.flash(&#39;error&#39;, &#39;Your username or password were incorrect, please try again.&#39;);
        return next();
    }

    keystone.session.signin({ email: req.body.email, password: req.body.password }, req, res, onSuccess, onFail);

});

view.render(&#39;session/signin&#39;);
</code></pre><p>}
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="lib/session.js#L71-L116"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="session-signinWithUser"></a><h4 id="-session-signinwithuser-user-req-res-onsuccess-">.session.signinWithUser( user, req, res, onSuccess )</h4>
<blockquote>
<p><em>@param</em> <strong>user</strong> <em>{Object}</em>  - user object<br><em>@param</em> <strong>req</strong> <em>{Object}</em>  - express request object<br><em>@param</em> <strong>res</strong> <em>{Object}</em>  - express response object<br><em>@param</em> <strong>onSuccess</strong> <em>{Object}</em>  - onSuccess callback, is passed the User instance  </p>
</blockquote>
<p>Creates a user session by supplying a user object </p>
<p><div class="code-header"> <h4>Example</h4></div><pre class=" language-javascript"><code class="language-javascript"></p>
<p>// express route
keystone.app.post(&#39;/signin&#39;, function(req, res) {</p>
<pre><code>    var passwordCheck = req.body.password;
    var onSuccess = function(user) {
        // successful session generation
    }
    User.model.find({email: req.body.email}).exec(function(err, user) {
        if (user &amp;&amp; (!passwordCheck || scmp(passwordCheck, hash(user.password)))) {
            keystone.session.signinWithUser(user, req, res, onSuccess);
        } else {
            // handle error
        }
    });
</code></pre><p>}
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="lib/session.js#L23-L58"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="session-signout"></a><h4 id="-session-signout-req-res-next-">.session.signout( req, res, next )</h4>
<blockquote>
<p><em>@param</em> <strong>req</strong> <em>{Object}</em>  - express request object<br><em>@param</em> <strong>res</strong> <em>{Object}</em>  - express response object<br><em>@param</em> <strong>next</strong> <em>{Object}</em>  - callback  </p>
</blockquote>
<p>Signs the current user out and resets the session</p>
<p><div class="code-header"> <h4>Example</h4>From <a href="http://www.sydjs.com" target="_blank">sydjs.com</a> <a href="https://github.com/JedWatson/sydjs-site/blob/master/routes/views/session/signout.js" target="_blank">(code)</a></div><pre class=" language-javascript"><code class="language-javascript">
function(req, res) {</p>
<pre><code>    var view = new keystone.View(req, res),
        locals = res.locals;

    locals.section = &#39;session&#39;;

    keystone.session.signout(req, res, function() {
        res.redirect(&#39;/&#39;);
    });
</code></pre><p>};
</code></pre></p>
<p><div class="code-header addGitHubLink" data-file="lib/session.js#L127-L154"> &nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="main-view"></a><h3>.View Class</h3><h4 id="new-keystone-view-req-res-">new Keystone.View( req, res )</h4>
<blockquote>
<p><em>@param</em> <strong>req</strong> <em>{Object}</em>  - valid Express req object<br><em>@param</em> <strong>res</strong> <em>{Object}</em>  - valid Express res object<br><em>@return</em> <strong>Instance</strong>   </p>
</blockquote>
<p>Helper to simplify view logic in a Keystone application  </p>
<pre><code class="lang-javascript">    var view = new keystone.View(req, res);

    view.render(&#39;index&#39;);
</code></pre>
<p><div class="code-header addGitHubLink" data-file="lib/view.js"> <a href="#" class="loadCode"> code</a></div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="view-on"></a><h4 id="view-on-on-callback-">View.on( on [, callback ] )</h4>
<blockquote>
<p><em>@param</em> <strong>on</strong> <em>{Function|Object|String}</em>  - Method to be executed<br><em>@param</em> <strong>callback</strong> <em>{Function}</em>  - Function to run in parallel on <code>on</code>.<br><em>@return</em> <strong>this</strong>  </p>
</blockquote>
<p>Adds a method (or array of methods) to be executed in parallel to the <code>init</code>, <code>action</code> or <code>render</code> queue.</p>
<h5 id="argument-on-options">argument <code>on</code> options</h5>
<ul>
<li><strong>init</strong> - Init events are always fired in series, before any other actions<pre><code class="lang-javascript">view.on(&#39;init&#39;, function (next) {
  // do something before any actions or queries have run
});
</code></pre>
</li>
<li><strong><code>Function</code></strong> - If the first argument is a <strong>Function</strong> that returns truthy then the second argument is added to the queue.</li>
<li><strong>Dynamic</strong> - Do certain actions depending on information in the response object.  <pre><code class="lang-javascript">view.on({ &#39;user.name.first&#39;: &#39;Admin&#39; }, function(next) {
    console.log(&#39;Hello Admin!&#39;);
    next();
});
</code></pre>
</li>
<li><strong>get</strong> - HTTP verb  </li>
<li><strong>post</strong> - HTTP verb  </li>
<li><strong>put</strong> - HTTP verb  </li>
<li><strong>delete</strong> - HTTP verb  </li>
<li><strong>render</strong> - Render events are always fired last in parallel, after any other actions  <pre><code class="lang-javascript">view.on(&#39;render&#39;, function (next) {
  // do something after init, action and query middleware has run
});
</code></pre>
</li>
</ul>
<p><div class="code-header"><h4>example</h4></div><pre class=" language-javascript"><code class="language-javascript">view.on(function() {</p>
<pre><code>    var thing = true;
    return thing;

}, function(next) {

    console.log(&#39;thing is true!&#39;);
    next();

});
</code></pre><p></code></pre>  </p>
<p><div class="code-header"> </p>
<p><h4>grab posts</h4><br></div><pre class=" language-javascript"><code class="language-javascript">    // Load posts
    view.on(&#39;init&#39;, function(next) {</p>
<pre><code>        var q = keystone.list(&#39;Post&#39;).paginate({
                page: req.query.page || 1,
                perPage: 10,
                maxPages: 10
            })
            .where(&#39;state&#39;, &#39;published&#39;)
            .sort(&#39;-publishedDate&#39;)
            .populate(&#39;author categories&#39;);

        if (locals.data.category) {
            q.where(&#39;categories&#39;).in([locals.data.category]);
        }

        q.exec(function(err, results) {
            locals.data.posts = results;
            next(err);
        });

    });
</code></pre><p></code></pre>  </p>
<p><div class="code-header addGitHubLink"  data-file="lib/view.js#L42-L193">&nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="view-query"></a><h4 id="view-query-key-query-options-">View.query( key, query, options )</h4>
<blockquote>
<p><em>@param</em> <strong>key</strong> <em>{Array}</em>  - Keys can be nested paths, containing objects will be created as required.<br><em>@param</em> <strong>query</strong> <em>{Object}</em>  - Mongoose query<br><em>@param</em> <strong>options</strong> <em>{Object}</em>  - Options<br><em>@return</em> <strong>chain</strong> - QueryCallbacks  </p>
</blockquote>
<p>Queues a mongoose query for execution before the view is rendered.<br>The results of the query are set in <code>locals[key]</code>.<br>Keys can be nested paths, containing objects will be created as required.<br>The third argument <code>then</code> can be a method to call after the query is completed such as <code class="default-value"> function(err, results, callback)</code>, or a <code>populateRelated</code> definition (string or array).</p>
<p><div class="code-header"> <h4>Examples</h4></div><pre class=" language-javascript"><code class="language-javascript"> </p>
<pre><code>/* an array of books from the database will be added to locals.books.*/
view.query(&#39;books&#39;, keystone.list(&#39;Book&#39;).model.find());

/*  You can also nest properties on the locals variable. */
view.query(
    &#39;admin.books&#39;,
    keystone.list(&#39;Book&#39;).model.find().where(&#39;user&#39;, &#39;Admin&#39;)
);
/* locals.admin.books will be the result of the query */


/* views.query().then is always called if it is available */
view.query(&#39;books&#39;, keystone.list(&#39;Book&#39;).model.find())
    .then(function (err, results, next) {
        if (err) return next(err);
        console.log(results);
        next();
    });
</code></pre><p></code></pre></p>
<p><div class="code-header addGitHubLink" data-file="lib/view.js#L214-L310">&nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><a name="view-render"></a><h4 id="view-render-renderfn-locals-callback-">View.render( renderFn, locals, callback )</h4>
<blockquote>
<p><em>@param</em> <strong>renderFn</strong> <em>{Function|String}</em>  - Render function<br><em>@param</em> <strong>locals</strong> <em>{Object}</em>  - Locals<br><em>@param</em> <strong>callback</strong> <em>{Function}</em>  - Render callback  </p>
</blockquote>
<p>Executes the current queue of init and action methods in series, and then executes the render function.<br>If renderFn is a string, it is provided to <code>res.render</code>.<br>It is expected that <em>most</em> init stacks require processing in series, but it is safe to execute actions in parallel.<br>If there are several <code>init</code> methods that should be run in parallel, queue them as an array, e.g. <code>view.on(&#39;init&#39;, [first, second])</code>.  </p>
<p><div class="code-header addGitHubLink" data-file="lib/view.js#L312-L375">&nbsp;</div><pre class=" language-javascript hideCode api"></pre> </p>
<hr><input type="hidden" id="_version" value="incoming"><input type="hidden" id="_path" value="/docs/api/incoming/class"><input type="hidden" id="_api" value="0.4.x"><input type="hidden" id="_branch" value="master"></div></div></div></div></div><div class="docs-footer"><div class="container"><p>Created by <a href="http://twitter.com/juanbenavidesr" target="_blank">@juanbenavidesr</a> under the <a href="http://opensource.org/licenses/MIT" target="_blank">MIT License</a></p><ul class="list-inline"><li><a href="/getting-started" title="NebulaJS Getting Started">Getting Started</a></li><li><a href="/docs" title="NebulaJS Documentation">Documentation</a></li><li><a href="https://github.com/altairstudios/nebula" target="_blank" title="Github Project (new window)">Github Project</a></li></ul></div></div><div class="docs-footer-floor"><div class="container"><div class="social-buttons"><div class="social-button social-button__twitter"><a href="https://twitter.com/nebulosajs" data-show-count="true" class="twitter-follow-button">Follow @nebulosajs</a></div><div class="social-button social-button__github"><iframe src="http://ghbtns.com/github-btn.html?user=keystonejs&amp;repo=keystone&amp;type=watch&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="86" height="20"></iframe></div></div></div></div><script src="{{ site.github.url }}/js/lib/jquery/jquery-1.10.2.min.js"></script><script src="{{ site.github.url }}/js/lib/bootstrap/collapse.js"></script><script src="{{ site.github.url }}/js/lib/prism/prism.min.js"></script><script src="{{ site.github.url }}/js/anchor-links.js"></script><script src="{{ site.github.url }}/js/api-code.js"></script><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
</script></body></html>